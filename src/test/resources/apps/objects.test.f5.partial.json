{
  "objects" : {
    "collections" : [ {
      "id" : "test",
      "createdAt" : "2020-05-12T00:12:46.499Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test",
        "numShards" : 1,
        "replicationFactor" : 1
      },
      "type" : "DATA",
      "metadata" : { }
    }, {
      "id" : "test_job_reports",
      "createdAt" : "2020-05-12T00:12:46.507Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_job_reports",
        "numShards" : 1,
        "replicationFactor" : 1
      },
      "type" : "JOB_REPORTS",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "test_query_rewrite",
      "createdAt" : "2020-05-12T00:12:46.508Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_query_rewrite",
        "numShards" : 1,
        "replicationFactor" : 1,
        "configTemplate" : "solr/conf/query_rewrite.zip"
      },
      "type" : "QUERY_REWRITE",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "test_query_rewrite_staging",
      "createdAt" : "2020-05-12T00:12:46.510Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_query_rewrite_staging",
        "numShards" : 1,
        "replicationFactor" : 1,
        "configTemplate" : "solr/conf/query_rewrite.zip"
      },
      "type" : "QUERY_REWRITE",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "test_signals",
      "createdAt" : "2020-05-12T00:12:52.479Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_signals",
        "numShards" : 2,
        "replicationFactor" : 1,
        "maxShardsPerNode" : 2,
        "configTemplate" : "solr/conf/insights.zip"
      },
      "type" : "SIGNALS",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "test_signals_aggr",
      "createdAt" : "2020-05-12T00:12:55.760Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_signals_aggr",
        "numShards" : 1,
        "replicationFactor" : 1,
        "maxShardsPerNode" : 1
      },
      "type" : "SIGNALS_AGGREGATION",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "test_user_prefs",
      "createdAt" : "2020-05-12T00:12:46.504Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "test_user_prefs",
        "numShards" : 1,
        "replicationFactor" : 1,
        "configTemplate" : "solr/conf/user_prefs.zip"
      },
      "type" : "USER_PREFS",
      "relatedCollectionId" : "test",
      "metadata" : { }
    }, {
      "id" : "zipcodes",
      "createdAt" : "2022-03-02T02:47:22.433Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "zipcodes",
        "numShards" : 1,
        "replicationFactor" : 2
      },
      "type" : "DATA",
      "metadata" : { }
    }, {
      "id" : "zipcodes_signals",
      "createdAt" : "2022-03-02T02:47:22.950Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "zipcodes_signals",
        "numShards" : 2,
        "replicationFactor" : 1,
        "maxShardsPerNode" : 2,
        "configTemplate" : "solr/conf/insights.zip"
      },
      "type" : "SIGNALS",
      "relatedCollectionId" : "zipcodes",
      "metadata" : { }
    }, {
      "id" : "zipcodes_signals_aggr",
      "createdAt" : "2022-03-02T02:47:27.082Z",
      "searchClusterId" : "default",
      "commitWithin" : 10000,
      "solrParams" : {
        "name" : "zipcodes_signals_aggr",
        "numShards" : 1,
        "replicationFactor" : 1,
        "maxShardsPerNode" : 1
      },
      "type" : "SIGNALS_AGGREGATION",
      "relatedCollectionId" : "zipcodes",
      "metadata" : { }
    } ],
    "indexPipelines" : [ {
      "id" : "_signals_ingest",
      "stages" : [ {
        "type" : "javascript-index",
        "id" : "fb77c86f-0296-4bbf-a9f4-753ec06e99b5",
        "script" : "function doWork(doc, ctx, collection, solrServer, solrServerFactory) {\n  var signalTitleField = \"doc_title_txt\";\n  var mainCollection = \"lucy\";\n  var idField = \"params.docId\";\n  var titleFieldName = \"label\";\n  var fieldList = titleFieldName\n\n  var signalType = \"\";\n  var docId = doc.getFirstFieldValue(idField);\n  if (doc.hasField(\"type\")) {\n    signalType = doc.getFirstFieldValue(\"type\");\n  }\n\n  if (docId && signalType == \"click\") {\n    logger.warn(\"(doWork) add title for doc: \" + docId);\n\n    var mainSolr = solrServerFactory.getSolrServer(mainCollection);\n    if (mainSolr != null) {\n      var q = 'id:\"' + docId + '\"';     // quote the id in case it is a url or otherwise contains special characters\n\n      try {\n        var query = new org.apache.solr.client.solrj.SolrQuery();\n        query.setRows(3);   // should be fine setting rows to 1 since there should only be one doc with a given doc id, setting to > 1 here for debugging ease\n        query.setQuery(q);\n        query.setFields();\n        // query.set(\"wt\", \"json\");\n        var response = mainSolr.query(query);   // response is the full response from solr, results is a sub-section of that response\n        var results = response.getResults();\n        var docs = results.get(\"docs\");\n        var cnt = docs.size();\n        logger.warn(cnt + \") ------------- (doWork) Response: \" + response);\n\n        if (cnt > 0) {\n          try {\n            var title = docs.get(titleFieldName);\n            if (title) {\n              logger.warn(\" (doWork) adding title: '\" + title + \"' to signal doc\");\n              doc.addField(signalTitleField, title);\n            } else {\n              logger.warn(\" (doWork) no title found for signal: '\" + doc);\n            }\n          } catch (ex) {\n            logger.error(\"(doWork) Error with doc title\", ex);\n          }\n\n          // for (var i = 0; i < results.size(); ++i) {\n          //   logger.info(\"-------- zzz result_\" + i, results.get(i).toString());\n          //   doc.addField(\"attr_doc\", results.get(i).toString());\n          // }\n\n        }\n\n      } catch (ex) {\n        logger.error(\"ZZZ Exception: \" + ex);\n        doc.addField(\"a_error_txt\", ex);\n      }\n\n    } else {\n      logger.error(\"------------ (doWork) No  solr server... ------------\");\n    }\n\n  }\n\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Map doc title to signal",
        "condition" : "",
        "licensed" : true,
        "secretSourceStageId" : "fb77c86f-0296-4bbf-a9f4-753ec06e99b5"
      }, {
        "type" : "field-mapping",
        "id" : "91c5b338-9634-404a-a754-ea37672a90d5",
        "mappings" : [ {
          "source" : "aaa_s",
          "target" : "bbb_s",
          "operation" : "set"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : true,
        "label" : "Test mapping",
        "licensed" : true,
        "secretSourceStageId" : "91c5b338-9634-404a-a754-ea37672a90d5"
      }, {
        "type" : "signal-formatter",
        "id" : "a045801d-e963-4b36-8cd4-7a0f36fb2968",
        "flatten" : true,
        "allowedTypes" : [ ],
        "undefinedType" : "general",
        "timestampLocale" : "en-US",
        "type" : "signal-formatter",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "a045801d-e963-4b36-8cd4-7a0f36fb2968"
      }, {
        "type" : "field-mapping",
        "id" : "b4b437eb-c623-4460-ac2c-445321e40102",
        "mappings" : [ {
          "source" : "params.timestamp",
          "target" : "timestamp",
          "operation" : "move"
        }, {
          "source" : "params.user",
          "target" : "user",
          "operation" : "move"
        }, {
          "source" : "params.user_token",
          "target" : "user_token",
          "operation" : "move"
        }, {
          "source" : "params.url",
          "target" : "url",
          "operation" : "move"
        }, {
          "source" : "params.label",
          "target" : "label",
          "operation" : "move"
        }, {
          "source" : "params.ctype",
          "target" : "ctype",
          "operation" : "move"
        }, {
          "source" : "params.host",
          "target" : "host",
          "operation" : "move"
        }, {
          "source" : "params.ip_address",
          "target" : "ip_address",
          "operation" : "move"
        }, {
          "source" : "params.app_id",
          "target" : "app_id",
          "operation" : "move"
        }, {
          "source" : "params.has_query",
          "target" : "has_query",
          "operation" : "move"
        }, {
          "source" : "params.has_clicks",
          "target" : "has_clicks",
          "operation" : "move"
        }, {
          "source" : "params.has_filters",
          "target" : "has_filters",
          "operation" : "move"
        }, {
          "source" : "params.domain",
          "target" : "domain",
          "operation" : "move"
        }, {
          "source" : "params.filter_field",
          "target" : "filter_field",
          "operation" : "move"
        }, {
          "source" : "params.filter",
          "target" : "filter",
          "operation" : "move"
        }, {
          "source" : "params.twigkitRequestToken",
          "target" : "twigkitRequestToken",
          "operation" : "move"
        }, {
          "source" : "params.response_type",
          "target" : "response_type",
          "operation" : "move"
        }, {
          "source" : "params.anonymous",
          "target" : "anonymous",
          "operation" : "move"
        }, {
          "source" : "params.browser_name",
          "target" : "browser_name",
          "operation" : "move"
        }, {
          "source" : "params.browser_type",
          "target" : "browser_type",
          "operation" : "move"
        }, {
          "source" : "params.browser_version",
          "target" : "browser_version",
          "operation" : "move"
        }, {
          "source" : "params.ctx_curr_path",
          "target" : "ctx_curr_path",
          "operation" : "move"
        }, {
          "source" : "params.ctx_curr_query",
          "target" : "ctx_curr_query",
          "operation" : "move"
        }, {
          "source" : "params.ctx_prev_path",
          "target" : "ctx_prev_path",
          "operation" : "move"
        }, {
          "source" : "params.ctx_prev_path_original",
          "target" : "ctx_prev_path_original",
          "operation" : "move"
        }, {
          "source" : "params.ctx_prev_query",
          "target" : "ctx_prev_query",
          "operation" : "move"
        }, {
          "source" : "params.ctx_prev_uri",
          "target" : "ctx_prev_uri",
          "operation" : "move"
        }, {
          "source" : "params.locale",
          "target" : "locale",
          "operation" : "move"
        }, {
          "source" : "params.orientation",
          "target" : "orientation",
          "operation" : "move"
        }, {
          "source" : "params.os_device",
          "target" : "os_device",
          "operation" : "move"
        }, {
          "source" : "params.res_offset",
          "target" : "res_offset",
          "operation" : "move"
        }, {
          "source" : "params.os_group",
          "target" : "os_group",
          "operation" : "move"
        }, {
          "source" : "params.os_id",
          "target" : "os_id",
          "operation" : "move"
        }, {
          "source" : "params.os_manufacturer",
          "target" : "os_manufacturer",
          "operation" : "move"
        }, {
          "source" : "params.os_name",
          "target" : "os_name",
          "operation" : "move"
        }, {
          "source" : "params.page_title",
          "target" : "page_title",
          "operation" : "move"
        }, {
          "source" : "params.path",
          "target" : "path",
          "operation" : "move"
        }, {
          "source" : "params.path_transition",
          "target" : "path_transition",
          "operation" : "move"
        }, {
          "source" : "params.query_transition",
          "target" : "query_transition",
          "operation" : "move"
        }, {
          "source" : "params.query_type",
          "target" : "query_type",
          "operation" : "move"
        }, {
          "source" : "params.referrer",
          "target" : "referrer",
          "operation" : "move"
        }, {
          "source" : "params.referrer_domain",
          "target" : "referrer_domain",
          "operation" : "move"
        }, {
          "source" : "params.request_transition",
          "target" : "request_transition",
          "operation" : "move"
        }, {
          "source" : "params.res_pos",
          "target" : "res_pos",
          "operation" : "move"
        }, {
          "source" : "params.user_roles",
          "target" : "user_roles",
          "operation" : "move"
        }, {
          "source" : "params.url_domain",
          "target" : "url_domain",
          "operation" : "move"
        }, {
          "source" : "params.url_path",
          "target" : "url_path",
          "operation" : "move"
        }, {
          "source" : "params.url_type",
          "target" : "url_type",
          "operation" : "move"
        }, {
          "source" : "params.score",
          "target" : "score",
          "operation" : "move"
        }, {
          "source" : "params.hits",
          "target" : "hits",
          "operation" : "move"
        }, {
          "source" : "params.rows",
          "target" : "rows",
          "operation" : "move"
        }, {
          "source" : "params.qtime",
          "target" : "qtime",
          "operation" : "move"
        }, {
          "source" : "params.collection",
          "target" : "collection",
          "operation" : "move"
        }, {
          "source" : "params.page",
          "target" : "page",
          "operation" : "move"
        }, {
          "source" : "params.platform",
          "target" : "platform",
          "operation" : "move"
        }, {
          "source" : "params.http_method",
          "target" : "http_method",
          "operation" : "move"
        }, {
          "source" : "type",
          "target" : "type",
          "operation" : "keep"
        }, {
          "source" : "params.type",
          "target" : "type",
          "operation" : "move"
        }, {
          "source" : "flag",
          "target" : "flag_s",
          "operation" : "move"
        }, {
          "source" : "params.flag",
          "target" : "flag_s",
          "operation" : "move"
        }, {
          "source" : "timestamp_tdt",
          "target" : "timestamp_tdt",
          "operation" : "keep"
        }, {
          "source" : "timestamp",
          "target" : "timestamp_tdt",
          "operation" : "copy"
        }, {
          "source" : "timestamp",
          "target" : "date",
          "operation" : "move"
        }, {
          "source" : "params.count",
          "target" : "count_i",
          "operation" : "move"
        }, {
          "source" : "params.weight",
          "target" : "weight_d",
          "operation" : "move"
        }, {
          "source" : "params.query",
          "target" : "query",
          "operation" : "copy"
        }, {
          "source" : "params.query",
          "target" : "query_t",
          "operation" : "move"
        }, {
          "source" : "params.doc_ids_s",
          "target" : "doc_ids_s",
          "operation" : "move"
        }, {
          "source" : "params.docId",
          "target" : "doc_id",
          "operation" : "move"
        }, {
          "source" : "params.userId",
          "target" : "user_id",
          "operation" : "move"
        }, {
          "source" : "params.user_id",
          "target" : "user_id",
          "operation" : "move"
        }, {
          "source" : "params.filterQueries",
          "target" : "filters_s",
          "operation" : "move"
        }, {
          "source" : "params.click_type",
          "target" : "ctype",
          "operation" : "move"
        }, {
          "source" : "params.offset",
          "target" : "res_offset",
          "operation" : "move"
        }, {
          "source" : "params.query_object",
          "target" : "query_object",
          "operation" : "delete"
        }, {
          "source" : "query_hash",
          "target" : "query_hash",
          "operation" : "keep"
        }, {
          "source" : "request_id_s",
          "target" : "request_id_s",
          "operation" : "keep"
        }, {
          "source" : "has_query",
          "target" : "has_query",
          "operation" : "keep"
        }, {
          "source" : "has_clicks",
          "target" : "has_clicks",
          "operation" : "keep"
        }, {
          "source" : "params.start",
          "target" : "res_offset",
          "operation" : "move"
        }, {
          "source" : "params.lw.pipelineId",
          "target" : "pipeline_id",
          "operation" : "move"
        }, {
          "source" : "params.q",
          "target" : "query",
          "operation" : "delete"
        }, {
          "source" : "params.numdocs",
          "target" : "hits",
          "operation" : "move"
        }, {
          "source" : "params.totaltime",
          "target" : "time",
          "operation" : "copy"
        }, {
          "source" : "params.totaltime",
          "target" : "totaltime",
          "operation" : "move"
        }, {
          "source" : "params.fl",
          "target" : "fields",
          "operation" : "move"
        }, {
          "source" : "params.doc_ids",
          "target" : "doc_ids",
          "operation" : "move"
        }, {
          "source" : "params.bq",
          "target" : "boost_query_ss",
          "operation" : "move"
        }, {
          "source" : "params.username",
          "target" : "user_id",
          "operation" : "move"
        }, {
          "source" : "params.session_id",
          "target" : "session",
          "operation" : "move"
        }, {
          "source" : "params.sessionId",
          "target" : "session",
          "operation" : "move"
        }, {
          "source" : "params.session",
          "target" : "session",
          "operation" : "move"
        }, {
          "source" : "params.fusionExperimentId",
          "target" : "experiment_id",
          "operation" : "move"
        }, {
          "source" : "params.fusionExperimentSignalsCollection",
          "target" : "experiment_collection",
          "operation" : "move"
        }, {
          "source" : "params.queryId",
          "target" : "query_id",
          "operation" : "move"
        }, {
          "source" : "params.query_id",
          "target" : "query_id",
          "operation" : "move"
        }, {
          "source" : "query_id",
          "target" : "query_id",
          "operation" : "keep"
        }, {
          "source" : "facet_field_ss",
          "target" : "facet_field_ss",
          "operation" : "keep"
        }, {
          "source" : "params.fusionQueryId",
          "target" : "fusion_query_id",
          "operation" : "move"
        }, {
          "source" : "params.fusionQueryId",
          "target" : "fusion_query_id",
          "operation" : "keep"
        }, {
          "source" : "params.fusionExperimentVariant",
          "target" : "experiment_variant",
          "operation" : "move"
        }, {
          "source" : "params.isFusionQuery",
          "target" : "is_fusion_query",
          "operation" : "move"
        }, {
          "source" : "/params\\.(.*)(?<!_.{1,2})$/",
          "target" : "params.$1_ss",
          "operation" : "move"
        }, {
          "source" : "/params\\.(.*)/",
          "target" : "params_$1",
          "operation" : "move"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "b4b437eb-c623-4460-ac2c-445321e40102"
      }, {
        "type" : "geoip-lookup",
        "id" : "c044db0d-e9fd-4a51-8caf-06ee35455451",
        "ipAddrField" : "ip_address",
        "hostnameField" : "host",
        "type" : "geoip-lookup",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "c044db0d-e9fd-4a51-8caf-06ee35455451"
      }, {
        "type" : "solr-index",
        "id" : "d29c8188-0d81-4a96-900a-44c22ed9a4c7",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ {
          "key" : "commit",
          "value" : "true"
        } ],
        "bufferDocsForSolr" : true,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "d29c8188-0d81-4a96-900a-44c22ed9a4c7"
      }, {
        "type" : "update-existing-doc",
        "id" : "207bd637-cbe3-46fc-a314-186c4dfca181",
        "realTimeGetQuery" : "id:${request_id_s} AND has_clicks:false",
        "lookupQuery" : "+query_id:\"${query_id}\" +type:request +has_clicks:false",
        "lookupSort" : "timestamp_tdt desc",
        "applyLookupCriteria" : "type == click",
        "fieldsToUpdate" : [ {
          "key" : "has_clicks",
          "value" : "true"
        } ],
        "idField" : "id",
        "secsToCacheRecentlyUpdatedDocs" : 120,
        "type" : "update-existing-doc",
        "skip" : false,
        "label" : "Update has_clicks flag",
        "licensed" : true,
        "secretSourceStageId" : "207bd637-cbe3-46fc-a314-186c4dfca181"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "_signals_ingest"
      }
    }, {
      "id" : "_system",
      "stages" : [ {
        "type" : "solr-index",
        "id" : "solr-system",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : true,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "solr-system"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "_system"
      }
    }, {
      "id" : "aero-nameNormalizer",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "79220fa5-4967-48f3-a322-a881c93a633c",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "79220fa5-4967-48f3-a322-a881c93a633c"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "3d8d5ad9-8843-434c-84d2-e53f727ad9f6",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "3d8d5ad9-8843-434c-84d2-e53f727ad9f6"
      }, {
        "type" : "solr-index",
        "id" : "c50a7116-7579-43c3-a2ba-24a8b2b919aa",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "c50a7116-7579-43c3-a2ba-24a8b2b919aa"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "aero-nameNormalizer"
      }
    }, {
      "id" : "aero-names-found",
      "stages" : [ {
        "type" : "javascript-index",
        "id" : "9a8a52b5-160e-47e2-9465-7cfeaf0c02c1",
        "script" : "function normalize(doc, ctx, collection, solrServer, solrServerFactory) {\r\n  var foundName = doc.getFirstFieldValue(\"foundName\");\r\n  logger.warn(\"-------------- Testing name lookup, found name: \" + foundName);\r\n  var nameServer = solrServerFactory.getSolrServer(\"test\");\r\n\r\n  if (nameServer != null) {\r\n    var query = new org.apache.solr.client.solrj.SolrQuery();\r\n    var q = \"name_t:\" + foundName;\r\n    query.setRows(10);\r\n    query.setQuery(q);\r\n    query.setParam(\"qf\", \"first_name_t\");\r\n    query.setParam(\"mm\", \"3\");\r\n    query.setParam(\"defType\", \"edismax\");\r\n    query.setFilterQueries(\"_lw_data_source_s:aero-names-official\")\r\n    var response = nameServer.query(query);\r\n\r\n    var matchedDocs = response.getResults();\r\n    var numFound = matchedDocs.getNumFound();\r\n\r\n    for (var i = 0; i < docs.size(); ++i) {\r\n      var md = matchedDocs.get(i);\r\n      var id = md.getFirstValue('id');\r\n      doc.addField(\"attr_test\", id);\r\n    }\r\n\r\n    var matches = checkFullName(doc, matchedDocs)\r\n    if(matches && matches.size)\r\n\r\n  }\r\n\r\n  return doc;\r\n\r\n}\r\n\r\nfunction checkFullName(foundName, officialNameDocs){\r\n  var fnLower = foundName.toLowerCase();\r\n  var matches = [];\r\n  officialNameDocs.forEach(function(onDoc, i){\r\n    var onFullname = onDoc.getFirstFieldValue(\"full_name_t\")\r\n    if(fnLower==onFullname){\r\n      matches.push(onDoc);\r\n    }\r\n  })\r\n  return matches;\r\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "normalize-names",
        "licensed" : true,
        "secretSourceStageId" : "9a8a52b5-160e-47e2-9465-7cfeaf0c02c1"
      }, {
        "type" : "field-mapping",
        "id" : "ba98b320-e918-445b-9a33-bf6c3f0ed4d1",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "ba98b320-e918-445b-9a33-bf6c3f0ed4d1"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "2f30732d-4111-4576-a3e7-ad889549383a",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "2f30732d-4111-4576-a3e7-ad889549383a"
      }, {
        "type" : "solr-index",
        "id" : "6a022121-9e6d-4f5f-acb0-506e1bc45d91",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "6a022121-9e6d-4f5f-acb0-506e1bc45d91"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "aero-names-found"
      }
    }, {
      "id" : "basic",
      "stages" : [ {
        "type" : "javascript-index",
        "id" : "bc2c3740-b2a2-4582-a4ac-4de383ee2e69",
        "script" : "function myfunc(doc) {\n  var lat = doc.getFirstFieldValue(\"LATITUDE\");\n  var lon = doc.getFirstFieldValue(\"LONGITUDE\");\n  if (lat && lon) {\n    var latlong = lat + \",\" + lon;\n    doc.addField(\"latlong_p\", latlong);\n  } else {\n    logger.warn(\"Invalid lat/lon: \" + lat + \",\" + lon)\n  }\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "combine lat long",
        "licensed" : true,
        "secretSourceStageId" : "bc2c3740-b2a2-4582-a4ac-4de383ee2e69"
      }, {
        "type" : "field-mapping",
        "id" : "f5ce5ff2-b8ea-452b-8f09-775beaedb582",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f5ce5ff2-b8ea-452b-8f09-775beaedb582"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "a52f839e-d853-475c-8528-da859c017eee",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "a52f839e-d853-475c-8528-da859c017eee"
      }, {
        "type" : "solr-index",
        "id" : "1db39750-b6f0-4d9c-83c3-265e37e3c0eb",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "1db39750-b6f0-4d9c-83c3-265e37e3c0eb"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "basic"
      }
    }, {
      "id" : "goc-generic",
      "stages" : [ {
        "type" : "javascript-index",
        "id" : "11a4202b-9874-4d2f-b728-e79d2b63a915",
        "script" : "function dropContent(doc){\n  \n  var url = 1; //doc.getFirstFieldValue(\"foo\");\n  if(url){\n    doc.addField(\"aaa_txt\", \"foo\");\n  } else {\n    doc.addField(\"aaa_txt\", \"bar\");\n  }\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : true,
        "label" : "JS drop content",
        "licensed" : true,
        "secretSourceStageId" : "11a4202b-9874-4d2f-b728-e79d2b63a915"
      }, {
        "type" : "javascript-index",
        "id" : "92c90d30-d2b5-4abf-bd1a-4153b23124f0",
        "script" : "function legalNameSubSetter(doc){\n  var urlField = \"_lw_parser_absolute_resource_name_s\";\n  if(doc.hasField(urlField)){\n    var tagEn = \"trade_commissioner_service\";\n    var tagFr = \"service_des_delegues_commerciaux\";\n    var fieldName = \"legalname_sub_s\";\n\n    var url = doc.getFirstFieldValue(urlField);\n    var enRegex = /https...www.(tradecommissioner.gc.ca.*|international.gc.ca\\/trade-commerce\\/.*\\?lang=eng|cananda.ca\\/en\\/services\\/business\\/trade\\/export.*)/;\n    var frRegex = /https...(www.deleguescommerciaux.gc.ca.*|international.gc.ca.trade-commerce\\/.*\\?lang=fra|canada.ca\\/fr\\/services\\/entreprises\\/commerce\\/exportation\\/.*)/;\n    if(enRegex.test(url)){\n      doc.setField(fieldName, tagEn);\n    } else if(frRegex.test(url)){\n      doc.addField(fieldName, tagFr);\n    } else {\n      //doc.addField(fieldName, 'n.a.');\n    }\n  } else {\n    doc.addField(\"aaa_txt\", \"LegalNameSubSetter no url? \" + urlField);\n  }\n  return doc;\n}\n/*\nPlease create a new value for legalname_s as below\nEnglish --> trade_commissioner_service\nFrench --> service_des_delegues_commerciaux\n\nThe English tag should be applied on the following\n1. https://www.tradecommissioner.gc.ca/*\n2. https://www.international.gc.ca/trade-commerce/*?lang=eng\n3. https://www.canada.ca/en/services/business/trade/export/*\n\nThe French label should be applied on\n1. https://www.deleguescommerciaux.gc.ca/*\n2. https://www.international.gc.ca/trade-commerce/*?lang=fra\n3. https://www.canada.ca/fr/services/entreprises/commerce/exportation/*\n*/",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "JS legalname_subs setter",
        "licensed" : true,
        "secretSourceStageId" : "92c90d30-d2b5-4abf-bd1a-4153b23124f0"
      }, {
        "type" : "javascript-index",
        "id" : "335cfd19-ca04-4ebc-9b10-80fd616d3e72",
        "script" : "function setGcTopic(doc){\n\n    var subjectFld = \"dcterms.subject\";\n    var subjectValEn = \"Home education\";\n    var subjectValFr = \"Éducation à domicile\";\n\n    var audienceFld = \"dcterms.audience\";\n    var audienceValEn = \"children\";\n    var audienceValFr = \"enfants\";\n\n    var enTopic = \"gc_kids_education\";\n    var frTopic = \"gc_enfants_education\";\n\n    var setField = \"gc_topic_ss\";\n    var urlField = \"_lw_parser_absolute_resource_name_s\";\n    var tmpField = \"aaa_txt\";\n\n    var subjects = doc.getFieldValues(subjectFld);\n    var audiences = doc.getFieldValues(audienceFld);\n    subjects.forEach(function(s){\n        if(s.indexOf(subjectValEn) > -1){\n            audiences.forEach(function(a){\n                if(a.indexOf(audienceValEn) > -1){\n                    doc.addField(setField, enTopic);   \n                }\n            });\n\n        } else if(s.indexOf(subjectValFr) > -1){\n            audiences.forEach(function(a){\n                if(a.indexOf(audienceValFr) > -1){\n                    doc.addField(setField, frTopic);   \n                }\n            });\n            \n        } else {\n            doc.addField(tmpField, \"setGcTopic n.a.\");   \n        }\n    });\n\n    return doc;\n}\n\n/**\n * The tag should be applied to the all the pages having already the following metadata\nEnglish\nMetadata name: dcterms.subject\nValue (contains): Home education\nAND\nMetadata name: dcterms.audience\nValue: children\n\nFrench\nMetadata name: dcterms.subject\nValue (contains): Éducation à domicile\nAND\nMetadata name: dcterms.audience\nValue: enfants\n */\n",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "JS kids activity tagger",
        "licensed" : true,
        "secretSourceStageId" : "335cfd19-ca04-4ebc-9b10-80fd616d3e72"
      }, {
        "type" : "field-mapping",
        "id" : "a684cb20-d26c-49f2-a8c2-9dbf7e608ded",
        "mappings" : [ {
          "source" : "script[type=\"application/ld+json\"]",
          "target" : "structured_data_txt",
          "operation" : "move"
        }, {
          "source" : "topic_gc_ss",
          "target" : "structured_data_json_ld",
          "operation" : "add"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "FM structured data: script json+ld",
        "condition" : "doc.hasField(\"script[type=\\\"application/ld+json\\\"]\")",
        "licensed" : true,
        "secretSourceStageId" : "a684cb20-d26c-49f2-a8c2-9dbf7e608ded"
      }, {
        "type" : "field-mapping",
        "id" : "440de287-d235-4213-b587-5343c94619fa",
        "mappings" : [ {
          "source" : "topic_gc_ss",
          "target" : "structured_data_rdfa",
          "operation" : "add"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "FM Structured data set topic_gc_ss",
        "condition" : "doc.hasField(\"body_typeof_s\") && doc.hasField(\"body_vocab_s\") && doc.getFirstFieldValue(\"body_vocab_s\").indexOf(\"//schema.org\") > -1",
        "licensed" : true,
        "secretSourceStageId" : "440de287-d235-4213-b587-5343c94619fa"
      }, {
        "type" : "javascript-index",
        "id" : "3cbe9f5b-9a10-4fb3-8de7-65526e7e2c09",
        "script" : "function (doc) {\n  doc.setId(removeParam(/^_ga$|^utm_/, doc.getId()));\n  return doc;\n}\n\nfunction removeParam(paramName, sourceURL) {\n    var fixedURL = sourceURL.split(\"?\")[0],\n        param,\n        params = [],\n        queryString = (sourceURL.indexOf(\"?\") !== -1) ? sourceURL.split(\"?\")[1] : \"\";\n    if (queryString !== \"\") {\n        params = queryString.split(\"&\");\n        for (var i = params.length - 1; i >= 0; i -= 1) {\n            param = params[i].split(\"=\")[0];\n            if (matchAsString(paramName, param) || matchAsRegex(paramName, param)) {\n                params.splice(i, 1);\n            }\n        }\n        fixedURL = params.length > 0 ? fixedURL + \"?\" + params.join(\"&\") : fixedURL;\n    }\n    return fixedURL;\n}\n\nfunction matchAsString(paramName, param) {\n    return typeof paramName === \"string\" && param === paramName;\n}\n\nfunction matchAsRegex(paramName, param) {\n    return paramName instanceof RegExp && paramName.test(param);\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Rewrite ID",
        "condition" : "doc.getId() !== null",
        "licensed" : true,
        "secretSourceStageId" : "3cbe9f5b-9a10-4fb3-8de7-65526e7e2c09"
      }, {
        "type" : "javascript-index",
        "id" : "b0d79a93-4d8c-4f9f-92f4-e33b50adcffe",
        "script" : "function(doc) {\n  return com.lucidworks.apollo.common.pipeline.PipelineDocument.newDelete(doc.getId(), true);\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Discard Junk Pages",
        "condition" : "doc.getId() !== null\n&& /^http\\:\\/\\/www\\.(healthycanadians|canadiensensante)\\.gc\\.ca\\/recall-alert-rappel-avis\\/search-recherche\\/.*/.test(doc.getId())",
        "licensed" : true,
        "secretSourceStageId" : "b0d79a93-4d8c-4f9f-92f4-e33b50adcffe"
      }, {
        "type" : "javascript-index",
        "id" : "d7563600-fad9-424f-8694-14e261fc676a",
        "script" : "function (doc) {\n    if (doc.hasField(\"robots\")) {\n        var robots = doc.getFirstFieldValue(\"robots\");\n        var values = robots.split(',');\n\n        for (i = 0; i < values.length; i++) {\n            var value = values[i].toLowerCase().trim();\n            if (value === 'noindex') {\n                return com.lucidworks.apollo.common.pipeline.PipelineDocument.newDelete(doc.getId(), true);\n            }\n        }\n    }\n    return doc;\n}\n",
        "type" : "javascript-index",
        "skip" : true,
        "label" : "Discard if has noindex meta tag",
        "condition" : "doc.hasField(\"robots\")",
        "licensed" : true,
        "secretSourceStageId" : "d7563600-fad9-424f-8694-14e261fc676a"
      }, {
        "type" : "field-mapping",
        "id" : "45622618-227a-4d7a-8c1e-f415a5d0ee4e",
        "mappings" : [ {
          "source" : "title",
          "target" : "",
          "operation" : "delete"
        }, {
          "source" : "_lw_custom_title",
          "target" : "title",
          "operation" : "move"
        } ],
        "reservedFieldsMappingAllowed" : true,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Custom title mapping",
        "condition" : "doc.hasField(\"_lw_custom_title\")",
        "licensed" : true,
        "secretSourceStageId" : "45622618-227a-4d7a-8c1e-f415a5d0ee4e"
      }, {
        "type" : "javascript-index",
        "id" : "9172269f-15db-458b-ab8d-7fb727bba72c",
        "script" : "function(doc) {\n  var title = doc.getFirstFieldValue(\"title\");\n  doc.setField(\"title\", title.replace(\" - Canada.ca\", \"\"));\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Title Customization (remove canada.ca)",
        "condition" : "doc.hasField(\"title\") && doc.getFirstFieldValue(\"title\").endsWith(\" - Canada.ca\")",
        "licensed" : true,
        "secretSourceStageId" : "9172269f-15db-458b-ab8d-7fb727bba72c"
      }, {
        "type" : "javascript-index",
        "id" : "d843303b-0676-48cd-b082-7cf12563f88d",
        "script" : "function (doc) {\n  if (doc.hasField(\"main\")) {\n  \tvar main = doc.getFirstFieldValue(\"main\");\n    doc.setField(\"body\", main);\n  \tdoc.removeFields(\"main\");\n    \n    if (doc.hasField(\"main2\")) {\n    \tdoc.removeFields(\"main2\");\n    }\n  } else if (doc.hasField(\"main2\")) {\n    var main2 = doc.getFirstFieldValue(\"main2\");\n    doc.setField(\"body\", main2);\n  \tdoc.removeFields(\"main2\");\n  }\n  return doc; \n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Set main tag content to body",
        "condition" : "doc.hasField(\"main\") || doc.hasField(\"main2\")",
        "licensed" : true,
        "secretSourceStageId" : "d843303b-0676-48cd-b082-7cf12563f88d"
      }, {
        "type" : "javascript-index",
        "id" : "9699e9d6-7838-405d-b9ba-74232397e3b0",
        "script" : "function(doc) {\n  logger.warn(\"Document \" + doc.getId() + \" skipped because of empty body\");\n  return com.lucidworks.apollo.common.pipeline.PipelineDocument.newDelete(doc.getId(), true);\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Discard Empty Body",
        "condition" : "!doc.getFirstFieldValue('body')",
        "licensed" : true,
        "secretSourceStageId" : "9699e9d6-7838-405d-b9ba-74232397e3b0"
      }, {
        "type" : "multivalue-resolver",
        "id" : "1990504d-e552-40df-be06-1d96207ce427",
        "typeStrategy" : [ ],
        "fieldStrategy" : [ {
          "fieldName" : "dcterms.language",
          "resolverStrategy" : "pick_first"
        }, {
          "fieldName" : "dcterms:language",
          "resolverStrategy" : "pick_first"
        } ],
        "creatorStrategy" : [ ],
        "type" : "multivalue-resolver",
        "skip" : false,
        "label" : "Resolve duplicated meta fields",
        "condition" : "(doc.hasField(\"dcterms.language\") && doc.getFieldValues(\"dcterms.language\").size() > 1) || (doc.hasField(\"dcterms:language\") && doc.getFieldValues(\"dcterms:language\").size() > 1)",
        "licensed" : true,
        "secretSourceStageId" : "1990504d-e552-40df-be06-1d96207ce427"
      }, {
        "type" : "field-mapping",
        "id" : "8e86a2ac-133f-499f-9813-348cd29147b1",
        "mappings" : [ {
          "source" : "_lw_parser_absolute_resource_name_s",
          "target" : "url_s",
          "operation" : "copy"
        }, {
          "source" : "title",
          "target" : "suggest_text",
          "operation" : "copy"
        }, {
          "source" : "title",
          "target" : "title_t",
          "operation" : "copy"
        }, {
          "source" : "_lw_parser_absolute_resource_name_s",
          "target" : "url_t",
          "operation" : "copy"
        }, {
          "source" : "legalName",
          "target" : "legalName_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.issued_s",
          "target" : "dcterms_issued_dt",
          "operation" : "copy"
        } ],
        "reservedFieldsMappingAllowed" : true,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Field Mapping",
        "condition" : "",
        "licensed" : true,
        "secretSourceStageId" : "8e86a2ac-133f-499f-9813-348cd29147b1"
      }, {
        "type" : "field-mapping",
        "id" : "dd47b9cf-b4c7-4b86-b047-1112c4776463",
        "mappings" : [ {
          "source" : "dcterms.language",
          "target" : "lang_s",
          "operation" : "copy"
        }, {
          "source" : "dcterms:language",
          "target" : "lang_s",
          "operation" : "copy"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Detect language from dcterms Meta tag",
        "condition" : "(doc.hasField(\"dcterms.language\") && doc.getFieldValues(\"dcterms.language\").size() == 1) || (doc.hasField(\"dcterms:language\") && doc.getFieldValues(\"dcterms:language\").size() == 1)",
        "licensed" : true,
        "secretSourceStageId" : "dd47b9cf-b4c7-4b86-b047-1112c4776463"
      }, {
        "type" : "regex-replacement",
        "id" : "363209a5-ec22-4280-aca8-19f3babb086c",
        "rules" : [ {
          "source" : [ "url_s" ],
          "target" : "lang_s",
          "writeMode" : "overwrite",
          "pattern" : ".+[-/_.=](fr|fra|francais|french)([-/_.&].*|$)",
          "returnIfNoMatch" : "null",
          "noMatchValue" : "no_match",
          "replacement" : "fr",
          "replaceWhich" : "all"
        } ],
        "type" : "regex-replacement",
        "skip" : false,
        "label" : "Detect French from URL",
        "condition" : "!doc.hasField(\"lang_s\")",
        "licensed" : true,
        "secretSourceStageId" : "363209a5-ec22-4280-aca8-19f3babb086c"
      }, {
        "type" : "regex-replacement",
        "id" : "9dfde0f0-c99a-433b-a28d-a50c8f28eac1",
        "rules" : [ {
          "source" : [ "url_s" ],
          "target" : "lang_s",
          "writeMode" : "overwrite",
          "pattern" : ".+[-/_.=](en|eng|english)([-/_.&].*|$)",
          "returnIfNoMatch" : "null",
          "replacement" : "en",
          "replaceWhich" : "all"
        } ],
        "type" : "regex-replacement",
        "skip" : false,
        "label" : "Detect English from URL",
        "condition" : "!doc.hasField(\"lang_s\")",
        "licensed" : true,
        "secretSourceStageId" : "9dfde0f0-c99a-433b-a28d-a50c8f28eac1"
      }, {
        "type" : "lang-detect",
        "id" : "8f42705e-d835-4439-94fe-a2479d42c52c",
        "source" : [ "body", "title" ],
        "outputType" : "document",
        "outputKey" : "languages",
        "documentPostfix" : "_lang_s",
        "type" : "lang-detect",
        "skip" : false,
        "label" : "Detect Language from body and title",
        "condition" : "!doc.hasField(\"lang_s\")",
        "licensed" : true,
        "secretSourceStageId" : "8f42705e-d835-4439-94fe-a2479d42c52c"
      }, {
        "type" : "field-mapping",
        "id" : "53856671-7897-4b2c-a4e9-63773b863fea",
        "mappings" : [ {
          "source" : "lang_s",
          "target" : "<body_lang_s>",
          "operation" : "add"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Detected language mapping",
        "condition" : "doc.hasField(\"body_lang_s\")",
        "licensed" : true,
        "secretSourceStageId" : "53856671-7897-4b2c-a4e9-63773b863fea"
      }, {
        "type" : "javascript-index",
        "id" : "c5074df9-3867-4f6f-99ce-5daf9e73da88",
        "script" : "function (doc) {\n  var lang = doc.getFirstFieldValue(\"lang_s\");\n  lang = lang.toLowerCase();\n  if (lang.startsWith(\"en\")) {\n    lang = \"en\";\n  } else if (lang.startsWith(\"fr\")) {\n    lang = \"fr\";\n  }\n  doc.setField(\"lang_s\", lang);\n  return doc; \n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Normalize lang_s value",
        "condition" : "doc.hasField(\"lang_s\")",
        "licensed" : true,
        "secretSourceStageId" : "c5074df9-3867-4f6f-99ce-5daf9e73da88"
      }, {
        "type" : "regex-replacement",
        "id" : "7a619f4c-88ce-46e1-8232-3d5e3a69b814",
        "rules" : [ {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/services/immigration-citizenship.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugees_and_citizenship_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/fr/immigration-refugies-citoyennete.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugies_et_citoyennete_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/fr/services/immigration-citoyennete.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugies_et_citoyennete_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/immigration-refugees-citizenship/.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugees_and_citizenship_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/department-finance.*",
          "returnIfNoMatch" : "null",
          "replacement" : "department_of_finance_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/ministere-finances.*",
          "returnIfNoMatch" : "null",
          "replacement" : "ministere_des_finances_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/indigenous-services-canada.*",
          "returnIfNoMatch" : "null",
          "replacement" : "indigenous_services_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/services-autochtones-canada.*",
          "returnIfNoMatch" : "null",
          "replacement" : "services_autochtones_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/crown-indigenous-relations-northern-affairs.*",
          "returnIfNoMatch" : "null",
          "replacement" : "crown_indigenous_relations_northern_affairs",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/relations-couronne-autochtones-affaires-nord.*",
          "returnIfNoMatch" : "null",
          "replacement" : "relations_couronne_autochtones_affaires_nord",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/northern-economic-development.*",
          "returnIfNoMatch" : "null",
          "replacement" : "northern_economic_development",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/developpement-economique-nord.*",
          "returnIfNoMatch" : "null",
          "replacement" : "developpement_economique_nord",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/(revenue-agency|services/taxes).*",
          "returnIfNoMatch" : "null",
          "replacement" : "canada_revenue_agency",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/(agence-revenu|services/impots).*",
          "returnIfNoMatch" : "null",
          "replacement" : "agence_du_revenue_du_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/impact-assessment-agency.*",
          "returnIfNoMatch" : "null",
          "replacement" : "impact_assessment_agency",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/agence-evaluation-impact.*",
          "returnIfNoMatch" : "null",
          "replacement" : "agence_d_evaluation_d_impact",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/services/(business|science).*",
          "returnIfNoMatch" : "null",
          "replacement" : "trade_commissioner_service",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/services/(entreprises|science).*",
          "returnIfNoMatch" : "null",
          "replacement" : "service_des_delegues_commerciaux",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/global-affairs/news.*",
          "returnIfNoMatch" : "null",
          "replacement" : "department_of_foreign_affairs__trade_and_development",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/affaires-mondiales/nouvelles.*",
          "returnIfNoMatch" : "null",
          "replacement" : "ministere_des_affaires_etrangeres__du_commerce_et_du_developpement",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.canada\\.ca/en/(department-national-defence|services/defence|government/publicservice/benefitsmilitary).*",
          "returnIfNoMatch" : "null",
          "replacement" : "department_of_national_defence",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*www\\.*canada\\.ca/fr/(ministere-defense-nationale|services/defense|gouvernement/fonctionpublique/avantagesmilitaires).*",
          "returnIfNoMatch" : "null",
          "replacement" : "ministere_de_la_defense_nationale",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*international\\.gc\\.ca/trade-commerce/.*lang=eng",
          "returnIfNoMatch" : "null",
          "replacement" : "trade_commissioner_service",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*international\\.gc\\.ca/trade-commerce/.*lang=fra",
          "returnIfNoMatch" : "null",
          "replacement" : "service_des_delegues_commerciaux",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*nrc\\.canada\\.ca/en/support-technology-innovation/.*",
          "returnIfNoMatch" : "null",
          "replacement" : "trade_commissioner_service",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*nrc\\.canada\\.ca/fr/soutien-linnovation-technologique/.*",
          "returnIfNoMatch" : "null",
          "replacement" : "service_des_delegues_commerciaux",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*agr\\.gc\\.ca/eng/international-trade.*",
          "returnIfNoMatch" : "null",
          "replacement" : "trade_commissioner_service",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*agr\\.gc\\.ca/fra/commerce-international.*",
          "returnIfNoMatch" : "null",
          "replacement" : "service_des_delegues_commerciaux",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*iaac-aeic\\.gc\\.ca/050/evaluations.*culture=en-CA.*",
          "returnIfNoMatch" : "null",
          "replacement" : "impact_assessment_agency",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalName_s",
          "writeMode" : "append",
          "pattern" : ".*iaac-aeic\\.gc\\.ca/050/evaluations.*culture=fr-CA.*",
          "returnIfNoMatch" : "null",
          "replacement" : "agence_d_evaluation_d_impact",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_en_s",
          "writeMode" : "append",
          "pattern" : ".*cic\\.gc\\.ca.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugees_and_citizenship_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_fr_s",
          "writeMode" : "append",
          "pattern" : ".*cic\\.gc\\.ca.*",
          "returnIfNoMatch" : "null",
          "replacement" : "immigration_refugies_et_citoyennete_canada",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_en_s",
          "writeMode" : "append",
          "pattern" : ".*chvi-icvv\\.gc\\.ca.*",
          "returnIfNoMatch" : "null",
          "replacement" : "canadian_hiv_vaccine_initiative",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_fr_s",
          "writeMode" : "append",
          "pattern" : ".*chvi-icvv\\.gc\\.ca.*",
          "returnIfNoMatch" : "null",
          "replacement" : "initiative_canadienne_de vaccine_contre_le_vih",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_en_s",
          "writeMode" : "append",
          "pattern" : ".*hc-sc\\.gc\\.ca/.*",
          "returnIfNoMatch" : "null",
          "replacement" : "department_of_health",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "legalname_fr_s",
          "writeMode" : "append",
          "pattern" : ".*hc-sc\\.gc\\.ca/.*",
          "returnIfNoMatch" : "null",
          "replacement" : "ministere_de_la_sante",
          "replaceWhich" : "all"
        }, {
          "source" : [ "url_s" ],
          "target" : "electn_cat",
          "writeMode" : "overwrite",
          "pattern" : ".*elections\\.ca\\/.*section=res&dir=his.*",
          "returnIfNoMatch" : "null",
          "replacement" : "his",
          "replaceWhich" : "all"
        } ],
        "type" : "regex-replacement",
        "skip" : false,
        "label" : "Custom legalName tagging",
        "condition" : "",
        "licensed" : true,
        "secretSourceStageId" : "7a619f4c-88ce-46e1-8232-3d5e3a69b814"
      }, {
        "type" : "javascript-index",
        "id" : "aa5bd79b-499d-4ace-ad00-a72dad2d71de",
        "script" : "function(doc) {\n  var tagMapping = {\n  \t\"comp\" : /(?=.+section=res(&|$))(?=.+dir=loi%2Fcom%2Fcompendium).*/,\n  \t\"legislation\" : /(?=.+section=res(&|$))(?=.+dir=loi).*/,\n  \t\"press_release\" : /(?=.+section=med(&|$))(?=.+dir=pre).*/,\n  \t\"research\" : /(?=.+section=res(&|$))(?=.+dir=rec).*/,\n  \t\"ogi\" : /(?=.+section=res(&|$))(?=.+dir=gui%2Fapp).*/,\n    \"his\" : /(?=.+section=res(&|$))(?=.+dir=his).*/,\n  \t\"officer_manuals\" : /(?=.+section=res(&|$))(?=.+dir=pub%2Fecdocs).*/\n  };\n  for (var tag in tagMapping) if (tagMapping[tag].test(doc.getId())) {\n    doc.setField(\"election_docs_category_s\", tag);\n    return doc;\n  }\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "JS: Detect Election Docs Category",
        "condition" : "doc.getId() !== null && doc.getId().contains(\"elections.ca\")",
        "licensed" : true,
        "secretSourceStageId" : "aa5bd79b-499d-4ace-ad00-a72dad2d71de"
      }, {
        "type" : "field-mapping",
        "id" : "2500c065-9d37-42b3-b142-b90991e7d811",
        "mappings" : [ {
          "source" : "body",
          "target" : "body_txt_en",
          "operation" : "copy"
        }, {
          "source" : "title",
          "target" : "title_txt_en",
          "operation" : "copy"
        }, {
          "source" : "description",
          "target" : "description_txt_en",
          "operation" : "copy"
        }, {
          "source" : "h1",
          "target" : "h1_txt_en",
          "operation" : "copy"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "English text mapping",
        "condition" : "doc.getFirstFieldValue(\"lang_s\") == \"en\"",
        "licensed" : true,
        "secretSourceStageId" : "2500c065-9d37-42b3-b142-b90991e7d811"
      }, {
        "type" : "field-mapping",
        "id" : "afca81c2-ed4b-48fb-adcb-ff2046be1d42",
        "mappings" : [ {
          "source" : "body",
          "target" : "body_txt_fr",
          "operation" : "copy"
        }, {
          "source" : "title",
          "target" : "title_txt_fr",
          "operation" : "copy"
        }, {
          "source" : "description",
          "target" : "description_txt_fr",
          "operation" : "copy"
        }, {
          "source" : "h1",
          "target" : "h1_txt_fr",
          "operation" : "copy"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "French text mapping",
        "condition" : "doc.getFirstFieldValue(\"lang_s\") == \"fr\"",
        "licensed" : true,
        "secretSourceStageId" : "afca81c2-ed4b-48fb-adcb-ff2046be1d42"
      }, {
        "type" : "javascript-index",
        "id" : "62b2a831-68d0-4fd1-8657-b78bb9354b56",
        "script" : "function (doc) {\n    var timestamp = Date.parse(doc.getFirstFieldValue('dcterms.modified'))\n        || Date.parse(doc.getFirstFieldValue('DCTERMS.modified'))\n        || Date.parse(doc.getFirstFieldValue('_lw_parsed_date_modified_s'));\n\n    if (!isNaN(timestamp)) {\n        var date = new Date(timestamp);\n\n        var year = date.getUTCFullYear();\n        var month = date.getUTCMonth() + 1;\n        var day = date.getUTCDate();\n\n        var lang = doc.getFirstFieldValue('lang_s');\n        var date_label = '';\n\n        switch(month) {\n            case 1:\n                var month_name_fr = 'janv.';\n                var month_name_en = 'Jan';\n                var month_num = '01';\n                break;\n            case 2:\n                var month_name_fr = 'févr.';\n                var month_name_en = 'Feb';\n                var month_num = '02';\n                break;\n            case 3:\n                var month_name_fr = 'mars';\n                var month_name_en = 'Mar';\n                var month_num = '03';\n                break;\n            case 4:\n                var month_name_fr = 'avr.';\n                var month_name_en = 'Apr';\n                var month_num = '04';\n                break;\n            case 5:\n                var month_name_fr = 'mai';\n                var month_name_en = 'May';\n                var month_num = '05';\n                break;\n            case 6:\n                var month_name_fr = 'juin';\n                var month_name_en = 'Jun';\n                var month_num = '06';\n                break;\n            case 7:\n                var month_name_fr = 'juil.';\n                var month_name_en = 'Jul';\n                var month_num = '07';\n                break;\n            case 8:\n                var month_name_fr = 'août';\n                var month_name_en = 'Aug';\n                var month_num = '08';\n                break;\n            case 9:\n                var month_name_fr = 'sept.';\n                var month_name_en = 'Sep';\n                var month_num = '09';\n                break;\n            case 10:\n                var month_name_fr = 'oct.';\n                var month_name_en = 'Oct';\n                var month_num = '10';\n                break;\n            case 11:\n                var month_name_fr = 'nov.';\n                var month_name_en = 'Nov';\n                var month_num = '11';\n                break;\n            case 12:\n                var month_name_fr = 'déc.';\n                var month_name_en = 'Dec';\n                var month_num = '12';\n                break;\n        }\n\n        if (lang === 'en') {\n            date_label = month_name_en + ' ' + day + ', ' + year; // Dec 22, 2016\n        } else if (lang === 'fr') {\n            date_label = day + ' ' + month_name_fr + ' ' + year; // 13 oct. 2017\n        }\n\n        doc.addField('dateModified_s', date_label);\n        doc.addField('dateModified_dt', year + '-' + month_num + '-' + day + 'T00:00:00Z'); // 2013-11-07T00:00:00Z\n    }\n\n    return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Create Date Labels",
        "licensed" : true,
        "secretSourceStageId" : "62b2a831-68d0-4fd1-8657-b78bb9354b56"
      }, {
        "type" : "javascript-index",
        "id" : "342e4caf-a16e-4244-b268-410f3e7f7eb3",
        "script" : "function (doc) {\n\n    function parseDate(dateStr, lang) {\n        var df = new java.text.SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss'Z'\");\n\n        var date = null;\n\n        if (lang === 'en') {\n            date = java.text.DateFormat.getDateInstance(java.text.DateFormat.LONG, java.util.Locale.CANADA).parse(dateStr);\n        } else if (lang === 'fr') {\n            date = java.text.DateFormat.getDateInstance(java.text.DateFormat.LONG, java.util.Locale.CANADA_FRENCH).parse(dateStr);\n        }\n\n        return date != null ? df.format(date) : null;\n    }\n\n    var lang = doc.getFirstFieldValue('lang_s');\n    var dlStartingDate = doc.getFirstFieldValue('dl_starting_date_s');\n\n    if (dlStartingDate != null && lang != null) {\n        var date = parseDate(dlStartingDate, lang);\n      \n        if (date != null) {\n            doc.addField('dl_starting_date_dt', date);\n        }\n    }\n\n    return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Safety Recalls Parse Dates",
        "condition" : "doc.hasField('lang_s') && doc.hasField('dl_starting_date_s')",
        "licensed" : true,
        "secretSourceStageId" : "342e4caf-a16e-4244-b268-410f3e7f7eb3"
      }, {
        "type" : "index-set-property",
        "id" : "4b92b325-ca75-45e3-aed8-7c9d45013df2",
        "source" : [ "lang_s" ],
        "regularExpression" : "fr",
        "outputType" : "document",
        "outputKey" : "legalName_s",
        "outputValue" : "<legalname_fr_s>",
        "whatMatched" : "whatMatched",
        "falseOutputValue" : "<legalname_en_s>",
        "type" : "index-set-property",
        "skip" : false,
        "label" : "Set legalname value",
        "condition" : "!doc.hasField(\"legalName_s\") && doc.hasField(\"legalname_fr_s\") && doc.hasField(\"legalname_en_s\")",
        "licensed" : true,
        "secretSourceStageId" : "4b92b325-ca75-45e3-aed8-7c9d45013df2",
        "whatMatchedKey" : "whatMatched"
      }, {
        "type" : "javascript-index",
        "id" : "d4903252-877d-448b-8aa8-1801b7cbbbe9",
        "script" : "function (doc) {\n  var legalname = doc.getFirstFieldValue(\"legalName_s\");\n  doc.setField(\"legalName_s\", legalname.toLowerCase().trim());\n  doc.setField(\"legalname_s\", legalname.toLowerCase().trim());\n  return doc;\n}\n\n",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "legalname to lowercase",
        "condition" : "doc.hasField(\"legalName_s\")",
        "licensed" : true,
        "secretSourceStageId" : "d4903252-877d-448b-8aa8-1801b7cbbbe9"
      }, {
        "type" : "regex-extractor",
        "id" : "13f1c282-7cd1-4c1a-813c-5524ad2859fb",
        "rules" : [ {
          "source" : [ "url_s" ],
          "target" : "hostname_s",
          "writeMode" : "append",
          "pattern" : "(https?://)(?:www\\.)?([^:^/]*)(:\\\\d*)?(.*)?",
          "returnIfNoMatch" : "value",
          "group" : 2
        } ],
        "type" : "regex-extractor",
        "skip" : false,
        "label" : "Extract host name",
        "licensed" : true,
        "secretSourceStageId" : "13f1c282-7cd1-4c1a-813c-5524ad2859fb"
      }, {
        "type" : "javascript-index",
        "id" : "81f6c02b-0004-45c3-b3da-ba827eb201f5",
        "script" : "function (doc) {\n    var url = doc.getId();\n\n    if (url && url.contains(\"?\")) {\n        var base = url.split(\"?\")[0];\n        var queryStr = url.split(\"?\")[1];\n\n        if (queryStr && queryStr.contains(\"&\")) {\n            var rawParams = queryStr.split(\"&\");\n\n            var params = {};\n\n            rawParams.forEach(function(rawParam) {\n                var param = rawParam.split(\"=\");\n                params[param[0].toLowerCase()] = param[1];\n            });\n\n            var newParams = [];\n\n            if (params.hasOwnProperty(\"section\")) {\n                newParams.push([\"section\", params[\"section\"]]);\n                delete params[\"section\"];\n            }\n            if (params.hasOwnProperty(\"dir\")) {\n                newParams.push([\"dir\", params[\"dir\"]]);\n                delete params[\"dir\"];\n            }\n            if (params.hasOwnProperty(\"document\")) {\n                newParams.push([\"document\", params[\"document\"]]);\n                delete params[\"document\"];\n            }\n            if (params.hasOwnProperty(\"lang\")) {\n                newParams.push([\"lang\", params[\"lang\"]]);\n                delete params[\"lang\"];\n            }\n\n            for (var key in params) {\n                newParams.push([key, params[key]]);\n            }\n\n            var newUrl = \"\";\n            newParams.forEach(function(p) {\n                if (newUrl != \"\") {\n                    newUrl = newUrl + \"&\";\n                }\n                newUrl = newUrl + p[0] + \"=\" + p[1];\n            });\n\n            newUrl = base + \"?\" + newUrl;\n\n            doc.setId(newUrl);\n        }\n    }\n\n    return doc;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "Elections Canada reorder URL parameters",
        "condition" : "doc.hasField(\"hostname_s\") && doc.getFirstFieldValue(\"hostname_s\") === \"elections.ca\"",
        "licensed" : true,
        "secretSourceStageId" : "81f6c02b-0004-45c3-b3da-ba827eb201f5"
      }, {
        "type" : "field-mapping",
        "id" : "082e028f-f173-4e8d-aa3d-070993a73444",
        "mappings" : [ {
          "source" : "title_txt_en",
          "target" : "park_name_txt_en",
          "operation" : "copy"
        }, {
          "source" : "title_txt_fr",
          "target" : "park_name_txt_fr",
          "operation" : "copy"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Extract Parks Canada Title",
        "condition" : "doc.getId() !== null\n&& /^https\\:\\/\\/www.pc.gc.ca\\/(en|fr)\\/pn-np\\/..\\/[a-z-]+$/.test(doc.getId())",
        "licensed" : true,
        "secretSourceStageId" : "082e028f-f173-4e8d-aa3d-070993a73444"
      }, {
        "type" : "lookup-extractor",
        "id" : "940baf65-c408-456c-b1dd-8bf4749f7d99",
        "rules" : [ {
          "source" : [ "title" ],
          "target" : "weather_city_s_lower",
          "writeMode" : "append",
          "entityTypes" : [ {
            "name" : "cities",
            "entityDefinitions" : [ "cities-ca.lst" ]
          } ],
          "additionalEntities" : [ ],
          "caseSensitive" : false
        } ],
        "type" : "lookup-extractor",
        "skip" : false,
        "label" : "City name extraction (weather.gc.ca)",
        "condition" : "doc.hasField(\"hostname_s\") && (doc.getFirstFieldValue(\"hostname_s\") == \"weather.gc.ca\" || doc.getFirstFieldValue(\"hostname_s\") == \"meteo.gc.ca\") && doc.getFirstFieldValue(\"url_s\").contains(\"/city/pages/\")",
        "licensed" : true,
        "secretSourceStageId" : "940baf65-c408-456c-b1dd-8bf4749f7d99"
      }, {
        "type" : "field-mapping",
        "id" : "a35a71f9-b091-4ea2-bd64-e9b602275330",
        "mappings" : [ {
          "source" : "lang_s",
          "target" : "sitelang_s",
          "operation" : "copy"
        }, {
          "source" : "legalName_s",
          "target" : "legalname_s",
          "operation" : "copy"
        }, {
          "source" : "title",
          "target" : "title_s",
          "operation" : "move"
        }, {
          "source" : "charSet_s",
          "operation" : "keep"
        }, {
          "source" : "dateModified_dt",
          "operation" : "keep"
        }, {
          "source" : "dateModified_s",
          "operation" : "keep"
        }, {
          "source" : "fetchedDate_dt",
          "operation" : "keep"
        }, {
          "source" : "lastModified_dt",
          "operation" : "keep"
        }, {
          "source" : "length_l",
          "operation" : "keep"
        }, {
          "source" : "mimeType_s",
          "operation" : "keep"
        }, {
          "source" : "parent_s",
          "operation" : "keep"
        }, {
          "source" : "lang_s",
          "operation" : "keep"
        }, {
          "source" : "hostname_s",
          "operation" : "keep"
        }, {
          "source" : "legalName_s",
          "operation" : "keep"
        }, {
          "source" : "legalname_s",
          "operation" : "keep"
        }, {
          "source" : "election_docs_category_s",
          "operation" : "keep"
        }, {
          "source" : "bcrumb_last_seg_s",
          "operation" : "keep"
        }, {
          "source" : "url_t",
          "operation" : "keep"
        }, {
          "source" : "url_s",
          "operation" : "keep"
        }, {
          "source" : "title_s",
          "operation" : "keep"
        }, {
          "source" : "title_t",
          "operation" : "keep"
        }, {
          "source" : "title_txt_en",
          "operation" : "keep"
        }, {
          "source" : "title_txt_fr",
          "operation" : "keep"
        }, {
          "source" : "description_s",
          "operation" : "keep"
        }, {
          "source" : "description_txt_en",
          "operation" : "keep"
        }, {
          "source" : "description_txt_fr",
          "operation" : "keep"
        }, {
          "source" : "weather_city_s_lower",
          "operation" : "keep"
        }, {
          "source" : "keywords",
          "target" : "keywords_t",
          "operation" : "move"
        }, {
          "source" : "body_txt_en",
          "operation" : "keep"
        }, {
          "source" : "body_txt_fr",
          "operation" : "keep"
        }, {
          "source" : "dcterms_issued_dt",
          "operation" : "keep"
        }, {
          "source" : "dcterms.accessRights",
          "target" : "dcterms.accessRights_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.audience",
          "target" : "dcterms.audience_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.contributor",
          "target" : "dcterms.contributor_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.creator",
          "target" : "dcterms.creator_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.created",
          "target" : "dcterms.created_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.description",
          "target" : "dcterms.description_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.format",
          "target" : "dcterms.format_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.identifier",
          "target" : "dcterms.identifier_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.issued",
          "target" : "dcterms.issued_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.keywords",
          "target" : "dcterms.keywords_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.language",
          "target" : "dcterms.language_s",
          "operation" : "move"
        }, {
          "source" : "dcterms_language",
          "target" : "dcterms_language_s",
          "operation" : "move"
        }, {
          "source" : "dcterms_minister",
          "target" : "dcterms_minister_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.modified",
          "target" : "dcterms.modified_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.publisher",
          "target" : "dcterms.publisher_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.service",
          "target" : "dcterms.service_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.source",
          "target" : "dcterms.source_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.spatial",
          "target" : "dcterms.spatial_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.subject",
          "target" : "dcterms.subject_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.title",
          "target" : "dcterms.title_s",
          "operation" : "move"
        }, {
          "source" : "dcterms.type",
          "target" : "dcterms.type_s",
          "operation" : "move"
        }, {
          "source" : "/^park_name_txt_(en|fr)$/",
          "target" : "",
          "operation" : "keep"
        }, {
          "source" : "searchMimeType_ss",
          "target" : "",
          "operation" : "keep"
        }, {
          "source" : "structured_data_txt",
          "target" : "",
          "operation" : "keep"
        }, {
          "source" : "legalname_sub_s",
          "operation" : "keep"
        }, {
          "source" : "body_typeof_s",
          "operation" : "keep"
        }, {
          "source" : "topic_gc_ss",
          "operation" : "keep"
        }, {
          "source" : "body_vocab_s",
          "operation" : "keep"
        }, {
          "source" : "gc_topic_ss",
          "operation" : "keep"
        }, {
          "source" : "h2_txt",
          "operation" : "keep"
        } ],
        "unmapped" : {
          "source" : "*",
          "operation" : "delete"
        },
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "Post processing field mapping",
        "licensed" : true,
        "secretSourceStageId" : "a35a71f9-b091-4ea2-bd64-e9b602275330"
      }, {
        "type" : "javascript-index",
        "id" : "ad16f66c-df2c-417f-ad1f-4eff8d0932ec",
        "script" : "function tag(doc) {\n  if (doc.getFlattenedFields().stream().filter(function (f) {\n    // be careful with adding body to fields filter -- it may dramatically decrease crawl/fusion performance by some unclear reason\n    return /^(title|description|dc|url).*/.test(f.getName());\n  }).anyMatch(function (f) {\n    return /.*(corona|covid|nCoV|virus Wuhan|Wuhan virus|SSUC|PCU|PCUE|CUEA|reouverture|ÉPI|Restrictions de voyage|AUCLC|Subvention salariale temporaire \\(SST\\)).*/i.test(f.getValue());\n  })) {\n    doc.addField(\"disease_tags_ss\", \"COVID-19\");\n  }\n  return doc;\n}\n\n/*\nhttps://lucidworks.lightning.force.com/lightning/r/Case/5002E00001bqcikQAA/view\nSSUC\nPCU\nPCUE\nCUEA\nreouverture\nÉPI\nRestrictions de voyage\nAUCLC\nSubvention salariale temporaire (SST)\n*/\n",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "COVID tagger",
        "licensed" : true,
        "secretSourceStageId" : "ad16f66c-df2c-417f-ad1f-4eff8d0932ec"
      }, {
        "type" : "solr-index",
        "id" : "68cd1883-8afd-4e08-9bbc-66277f97a6f4",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : true,
        "type" : "solr-index",
        "skip" : false,
        "label" : "Solr Index",
        "licensed" : true,
        "secretSourceStageId" : "68cd1883-8afd-4e08-9bbc-66277f97a6f4"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "goc-generic"
      }
    }, {
      "id" : "hpe-typeahead",
      "stages" : [ {
        "type" : "javascript-index",
        "id" : "whr",
        "script" : "function(doc){\n  var id = doc.getId();\n  var newDocs = [];\n  newDocs.push(doc);\n\n  var meta = doc.getFirstFieldValue('Meta Description');\n  var dsrc = doc.getFirstFieldValue('_lw_data_source_s');\n  \n  var pdm = new com.lucidworks.apollo.common.pipeline.PipelineDocument('meta-' + meta);\n  pdm.addField('type_s', 'MetaData');\n  pdm.addField('name_s', meta);\n  pdm.addField('_lw_data_source_s', dsrc);\n  newDocs.push(pdm);\n\n  var keyword = doc.getFirstFieldValue('Meta Keywords');\n  var pdk = new com.lucidworks.apollo.common.pipeline.PipelineDocument('keyword-' + keyword);\n  pdk.addField('type_s', 'Keyword');\n  pdk.addField('name_s', keyword);\n  pdk.addField('_lw_data_source_s', dsrc);\n  newDocs.push(pdm);\n\n  var sku = doc.getFirstFieldValue('Product SKU Number');\n  var pds = new com.lucidworks.apollo.common.pipeline.PipelineDocument('sku-' + sku);\n  pds.addField('type_s', 'SKU');\n  pds.addField('name_s', sku);\n  pds.addField('_lw_data_source_s', dsrc);\n  newDocs.push(pds);\n\n  return newDocs;\n}",
        "type" : "javascript-index",
        "skip" : false,
        "label" : "split and expand ta docs",
        "licensed" : true,
        "secretSourceStageId" : "whr"
      }, {
        "type" : "field-mapping",
        "id" : "8b4ab316-0c3a-41d4-9515-d6f9856ceaac",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8b4ab316-0c3a-41d4-9515-d6f9856ceaac"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "00f339d6-9a7f-46f2-bece-267062e77fa4",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "00f339d6-9a7f-46f2-bece-267062e77fa4"
      }, {
        "type" : "solr-index",
        "id" : "868dea2c-a50b-4dae-b802-82a1a33b13c0",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "868dea2c-a50b-4dae-b802-82a1a33b13c0"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "hpe-typeahead"
      }
    }, {
      "id" : "lw-web-ppl",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "d65d23da-3488-4600-8687-5f5ecf0b82c0",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "d65d23da-3488-4600-8687-5f5ecf0b82c0"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "bae3b31a-f1ce-483f-be68-150bd46e120a",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "bae3b31a-f1ce-483f-be68-150bd46e120a"
      }, {
        "type" : "solr-index",
        "id" : "78568f38-b655-49d7-bc54-9e150ded070f",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "78568f38-b655-49d7-bc54-9e150ded070f"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "lw-web-ppl"
      }
    }, {
      "id" : "test",
      "stages" : [ {
        "type" : "tika-parser",
        "id" : "48aa602e-a130-4f41-aafa-28c51bb3b602",
        "includeImages" : false,
        "flattenCompound" : false,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentField" : "_raw_content_",
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : true,
        "extractOtherLinks" : false,
        "includeContentTypes" : [ ],
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "type" : "tika-parser",
        "skip" : false,
        "label" : "testtika1",
        "licensed" : true,
        "secretSourceStageId" : "48aa602e-a130-4f41-aafa-28c51bb3b602"
      }, {
        "type" : "field-mapping",
        "id" : "81ef2faf-ce92-4b8a-95b1-f0dce7fa04a7",
        "mappings" : [ {
          "source" : "aa_tocic_gc_ss",
          "target" : "structured_data",
          "operation" : "set"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : true,
        "label" : "Structured Data Field mapping script json+ld",
        "condition" : "doc.hasField(\"script[type=\\\"application/ld+json\\\"]\")",
        "licensed" : true,
        "secretSourceStageId" : "81ef2faf-ce92-4b8a-95b1-f0dce7fa04a7"
      }, {
        "type" : "javascript-index",
        "id" : "c5be9fd4-401d-4905-b366-57f39e596e20",
        "script" : "function setGcTopic(doc){\n\n    var subjectFld = \"dcterms.subject\";\n    var subjectValEn = \"Home education\";\n    var subjectValFr = \"Éducation à domicile\";\n\n    var audienceFld = \"dcterms.audience\";\n    var audienceValEn = \"children\";\n    var audienceValFr = \"enfants\";\n\n    var enTopic = \"gc_kids_education\";\n    var frTopic =  \"gc_enfants_education\";\n\n    var checkUrls = [\"https://www.wd-deo.gc.ca/eng/\", \"https://www.canada.ca/en/\", \"https://cfc-swc.gc.ca/\"];\n\n    var setField = \"gc_topic_ss\";\n    var urlField = \"id\";\n\n    if (doc.hasField(urlField)) {\n        var url = doc.getFirstFieldValue(urlField);\n\n        //var urlApplicable = checkUrls.some( checkU => url.toLowerCase().includes(checkU));\n        var urlApplicable = false;\n        arr.forEach(function(a){\n            if (typeof(a) == 'string' && url.indexOf(a)>-1) {\n                urlApplicable = true;\n                logger.warn(\"zzz found url: \" + url + \" matches: \" + a)\n            } else {\n                logger.warn(\"zzz NOT found url: \" + url + \" matching: \" + a)\n            }    \n        });\n\n        if(urlApplicable){\n            doc.addField(\"aaa_s\", \"found matching url\");\n            logger.info(\"Found matching url\");\n        } else {\n            doc.addField(\"aaa_ss\", \"did not find matching url: \" + url);\n            logger.info(\"did not find matching url\");\n        }\n\n/*        if(urlApplicable) {\n            var sve = doc.getFieldValues(subjectFld).some(fval => fval === subjectValEn);\n            if (sve) {\n                var ave = doc.getFieldValues(audienceFld).some(aval => aval === audienceValEn);\n                if (ave) {\n                    doc.addField(setField, subjectValEn)\n                } else {\n                    logger.info(\"English Subject value matched, but audience did not: \" + ave)\n                }\n            } else {\n                var svf = doc.getFieldValues(subjectFld).some(fval => fval === subjectValFr);\n                if (svf) {\n                    var avf = doc.getFieldValues(audienceFld).some(aval => aval === audienceValFr);\n                    if (avf) {\n                        doc.addField(setField, subjectValFr)\n                    } else {\n                        logger.info(\"French Subject value matched, but audience did not: \" + avf)\n                    }\n                } else {\n                    logger.info(\"Neither english nor french subject value matched\");\n                }\n            }\n        } else {\n            logger.info(\"No applicable url: \" + url)\n        }\n        */\n    } else {\n        doc.setField(setField, \"no url/id field??\");\n    }\n    var foo = \"azz\";\n    doc.setField(\"azz_s\", \"mapping test zzz\");\n\n    return doc;\n\n}\n",
        "type" : "javascript-index",
        "skip" : true,
        "label" : "javascript setGcTopic",
        "licensed" : true,
        "secretSourceStageId" : "c5be9fd4-401d-4905-b366-57f39e596e20"
      }, {
        "type" : "field-mapping",
        "id" : "f427d353-b893-4d3f-81fd-400ad19a191b",
        "mappings" : [ {
          "source" : "/^(og|twitter).*/",
          "target" : "metabucket_t",
          "operation" : "move"
        } ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "label" : "General Field Mapping with meta-bucket",
        "licensed" : true,
        "secretSourceStageId" : "f427d353-b893-4d3f-81fd-400ad19a191b"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "285c5d64-ad44-4709-84ba-3d0e620fcc14",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "285c5d64-ad44-4709-84ba-3d0e620fcc14"
      }, {
        "type" : "javascript-index",
        "id" : "1f027adb-49a1-41c7-b720-b5b36a1695c6",
        "script" : "function tlnwa(doc){\n  if(doc.hasField(\"_lw_parser_resource_name_s\")){\n    var url = doc.getFirstFieldValue(\"_lw_parser_resource_name_s\");\n    if(url.match(\"(canada|foo)\")){\n      doc.addField(\"aa_legalname_s\", \"foo\");\n    } else {\n      doc.addField(\"aa_legalname_s\", \"no foo\");\n    }\n  } else {\n    doc.addField(\"aa_legalname_s\", \"no foo\");\n  }\n  return doc;\n}",
        "type" : "javascript-index",
        "skip" : true,
        "label" : "JS tag legalname where appropriate",
        "licensed" : true,
        "secretSourceStageId" : "1f027adb-49a1-41c7-b720-b5b36a1695c6"
      }, {
        "type" : "solr-index",
        "id" : "53e92482-bbe3-4b38-aa9a-6e6bddb0db7c",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : true,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "53e92482-bbe3-4b38-aa9a-6e6bddb0db7c"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test"
      }
    }, {
      "id" : "test-question-answering",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "9a03b4cd-8490-4e5c-b056-6c23848f193f",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "9a03b4cd-8490-4e5c-b056-6c23848f193f"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "ded16695-cbd1-4e11-9f48-989a7355906f",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "ded16695-cbd1-4e11-9f48-989a7355906f"
      }, {
        "type" : "tf-deep-encoding-index",
        "id" : "ae6748e1-2528-41db-8346-35f7cc86dfb2",
        "modelId" : "sample_qna_model.zip",
        "documentFeatureField" : "body_t",
        "vectorField" : "document_vector_ds",
        "clustersField" : "document_clusters_ss",
        "distancesField" : "document_distances_ds",
        "numClusters" : 1,
        "failOnError" : false,
        "storeInContext" : false,
        "type" : "tf-deep-encoding-index",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "ae6748e1-2528-41db-8346-35f7cc86dfb2"
      }, {
        "type" : "solr-index",
        "id" : "f0a36869-98ee-491d-8dd6-1d8ba2956c64",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f0a36869-98ee-491d-8dd6-1d8ba2956c64"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test-question-answering"
      }
    }, {
      "id" : "test-question-answering-dual-fields",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "587242db-593b-4775-9c5d-eee4a17d3fdc",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "587242db-593b-4775-9c5d-eee4a17d3fdc"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "3094fcc2-2c0c-457f-b91d-6640a6f0d198",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "3094fcc2-2c0c-457f-b91d-6640a6f0d198"
      }, {
        "type" : "tf-deep-encoding-index",
        "id" : "83413dac-0373-420f-9f19-f2f6d47e5f98",
        "modelId" : "sample_qna_model.zip",
        "documentFeatureField" : "question_t",
        "vectorField" : "question_vector_ds",
        "clustersField" : "question_clusters_ss",
        "distancesField" : "question_distances_ds",
        "numClusters" : 1,
        "failOnError" : false,
        "storeInContext" : false,
        "type" : "tf-deep-encoding-index",
        "skip" : false,
        "label" : "Question Deep Encoding",
        "licensed" : false,
        "secretSourceStageId" : "83413dac-0373-420f-9f19-f2f6d47e5f98"
      }, {
        "type" : "tf-deep-encoding-index",
        "id" : "f3bed174-df09-4295-b6c3-099c54361337",
        "modelId" : "sample_qna_model.zip",
        "documentFeatureField" : "answer_t",
        "vectorField" : "answer_vector_ds",
        "clustersField" : "answer_clusters_ss",
        "distancesField" : "answer_distances_ds",
        "numClusters" : 1,
        "failOnError" : false,
        "storeInContext" : false,
        "type" : "tf-deep-encoding-index",
        "skip" : false,
        "label" : "Answer Deep Encoding",
        "licensed" : false,
        "secretSourceStageId" : "f3bed174-df09-4295-b6c3-099c54361337"
      }, {
        "type" : "solr-index",
        "id" : "834e0cc1-cb0f-4c57-96f6-564b86fa44d7",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "834e0cc1-cb0f-4c57-96f6-564b86fa44d7"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test-question-answering-dual-fields"
      }
    }, {
      "id" : "test_query_rewrite_staging",
      "stages" : [ {
        "type" : "solr-index",
        "id" : "30428e52-de20-4078-85f9-f8544a563bd3",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "30428e52-de20-4078-85f9-f8544a563bd3"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test_query_rewrite_staging"
      }
    }, {
      "id" : "upval_parsers",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "30e74fc5-2bbe-4f93-b3a4-ce9a588f08a6",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "30e74fc5-2bbe-4f93-b3a4-ce9a588f08a6"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "ddc67456-07a6-4fc9-9ea4-c388c3a03873",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "ddc67456-07a6-4fc9-9ea4-c388c3a03873"
      }, {
        "type" : "solr-index",
        "id" : "94b90c44-0f78-4de7-9bc1-f7929035215e",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "94b90c44-0f78-4de7-9bc1-f7929035215e"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "upval_parsers"
      }
    }, {
      "id" : "zipcodes",
      "stages" : [ {
        "type" : "field-mapping",
        "id" : "7e5ce95f-5cac-469b-9fd6-5e4080f56b8c",
        "mappings" : [ ],
        "reservedFieldsMappingAllowed" : false,
        "type" : "field-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "7e5ce95f-5cac-469b-9fd6-5e4080f56b8c"
      }, {
        "type" : "solr-dynamic-field-name-mapping",
        "id" : "58e17382-3eba-401a-b283-22416414c2bd",
        "duplicateSingleValuedFields" : false,
        "fieldsToExclude" : [ ],
        "advancedTextFieldsIndexing" : true,
        "maxTextLengthForAdvancedIndexing" : 100,
        "type" : "solr-dynamic-field-name-mapping",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "58e17382-3eba-401a-b283-22416414c2bd"
      }, {
        "type" : "solr-index",
        "id" : "aba64907-5bbc-44ca-a91d-c32a0496c0fa",
        "enforceSchema" : true,
        "dateFormats" : [ ],
        "params" : [ ],
        "bufferDocsForSolr" : false,
        "type" : "solr-index",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "aba64907-5bbc-44ca-a91d-c32a0496c0fa"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "zipcodes"
      }
    } ],
    "queryPipelines" : [ {
      "id" : "SignalsBrowser",
      "stages" : [ {
        "type" : "set-params",
        "id" : "f2d",
        "params" : [ {
          "key" : "fq",
          "value" : "timestamp_tdt:[NOW/MINUTE-1HOUR TO *]",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Recent docs",
        "licensed" : true,
        "secretSourceStageId" : "f2d"
      }, {
        "type" : "set-params",
        "id" : "5v",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "5v"
      }, {
        "type" : "set-params",
        "id" : "bka",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "bka"
      }, {
        "type" : "set-params",
        "id" : "bg",
        "params" : [ {
          "key" : "fq",
          "value" : "-query_orig_s:\"*:*\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Filter out noise",
        "licensed" : true,
        "secretSourceStageId" : "bg"
      }, {
        "type" : "text-tagger",
        "id" : "9c95f6bf-2607-4b16-b243-aac319db7b98",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "9c95f6bf-2607-4b16-b243-aac319db7b98",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "recommendation",
        "id" : "a51c10bc-7d66-43c5-81a3-f57b87413574",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "a51c10bc-7d66-43c5-81a3-f57b87413574",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "search-fields",
        "id" : "dac376e2-42f6-49df-8ad6-edf0d17c6d47",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ ],
        "returnFields" : [ "*", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "dac376e2-42f6-49df-8ad6-edf0d17c6d47",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "facet",
        "id" : "b157e59d-af83-426b-a595-6e3d35c305a9",
        "fieldFacets" : [ {
          "field" : "type",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "query_orig_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "date_day",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fusion_query_id",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "is_fusion_query",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "b157e59d-af83-426b-a595-6e3d35c305a9",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "query-rules",
        "id" : "cb1613db-eb7e-4bc2-b391-d9d0048a0d4a",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cb1613db-eb7e-4bc2-b391-d9d0048a0d4a",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "solr-query",
        "id" : "214e6d57-17d1-459e-884f-1d1b4071908a",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "214e6d57-17d1-459e-884f-1d1b4071908a",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "query-rules-augment-response",
        "id" : "03769d85-c581-4add-934c-f4185e2797fe",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "03769d85-c581-4add-934c-f4185e2797fe",
        "properties" : {
          "autoCreated" : true
        }
      } ],
      "properties" : {
        "secretSourcePipelineId" : "SignalsBrowser"
      }
    }, {
      "id" : "SignalsBrowser2",
      "stages" : [ {
        "type" : "set-params",
        "id" : "z2",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_audience_s:(children enfants scientists)",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to audience",
        "licensed" : true,
        "secretSourceStageId" : "z2"
      }, {
        "type" : "set-params",
        "id" : "rc8",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_subject_s:(\"Home education\" \"Éducation à domicile\" \"agriculture\")",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Filter to specific dcterms values",
        "licensed" : true,
        "secretSourceStageId" : "rc8"
      }, {
        "type" : "set-params",
        "id" : "lxuo",
        "params" : [ {
          "key" : "fq",
          "value" : "_lw_data_source_s:\"ca-gov-parsing-test\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to datasource",
        "licensed" : true,
        "secretSourceStageId" : "lxuo"
      }, {
        "type" : "set-params",
        "id" : "2ud",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        }, {
          "key" : "hl.snippets",
          "value" : "3",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "2ud"
      }, {
        "type" : "set-params",
        "id" : "0o",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "0o"
      }, {
        "type" : "search-fields",
        "id" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "title_t",
          "boost" : 5.0
        }, {
          "field" : "description_t",
          "boost" : 3.0
        }, {
          "field" : "url_t",
          "boost" : 4.0
        }, {
          "field" : "body_t",
          "boost" : 1.0
        }, {
          "field" : "_text_",
          "boost" : 0.01
        } ],
        "returnFields" : [ "*", "score", "title_t", "description_t", "fetchedDate_dt", "publishedDate_dt", "length_l", "aaa_s", "azz_s", "gc_topic_ss", "dcterms_subject_s", "aa_legalname_s" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9"
      }, {
        "type" : "set-params",
        "id" : "cki",
        "params" : [ {
          "key" : "qf",
          "value" : "title_t^5 url_t^4 description_t^3 body_t _text_$0.01",
          "policy" : "default"
        }, {
          "key" : "fl",
          "value" : "id score title_t description_t fetchedDate_dt ",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Set Query Fields params",
        "licensed" : true,
        "secretSourceStageId" : "cki"
      }, {
        "type" : "facet",
        "id" : "8e04cae3-41c7-44d2-894d-804800269229",
        "fieldFacets" : [ {
          "field" : "_lw_batch_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "_lw_data_source_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fetchedDate_dt",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mimeType_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "parent_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "length_l",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "date_day",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "filters_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "flag_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "hits",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fusion_query_id",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "pipeline_id",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "query_orig_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "response_type",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8e04cae3-41c7-44d2-894d-804800269229",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "text-tagger",
        "id" : "788fa5e2-6691-4121-98e1-eb3cf81e2805",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "788fa5e2-6691-4121-98e1-eb3cf81e2805"
      }, {
        "type" : "recommendation",
        "id" : "cdd8455f-1039-47b6-a0e8-137809589ce5",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cdd8455f-1039-47b6-a0e8-137809589ce5"
      }, {
        "type" : "query-rules",
        "id" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961"
      }, {
        "type" : "solr-query",
        "id" : "a7c7886d-229c-469d-9802-1593ad8adb9f",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "a7c7886d-229c-469d-9802-1593ad8adb9f"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "7bacff2b-cf35-4524-8f91-14815b82edcd",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "7bacff2b-cf35-4524-8f91-14815b82edcd"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "SignalsBrowser2"
      }
    }, {
      "id" : "SignalsBrowserAggregated",
      "stages" : [ {
        "type" : "set-params",
        "id" : "f2d",
        "params" : [ {
          "key" : "fq",
          "value" : "timestamp_tdt:[NOW/MINUTE-1HOUR TO *]",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Recent docs",
        "licensed" : true,
        "secretSourceStageId" : "f2d"
      }, {
        "type" : "set-params",
        "id" : "5v",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "5v"
      }, {
        "type" : "set-params",
        "id" : "bka",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "bka"
      }, {
        "type" : "set-params",
        "id" : "bg",
        "params" : [ {
          "key" : "fq",
          "value" : "-query_orig_s:\"*:*\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Filter out noise",
        "licensed" : true,
        "secretSourceStageId" : "bg"
      }, {
        "type" : "search-fields",
        "id" : "dac376e2-42f6-49df-8ad6-edf0d17c6d47",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ ],
        "returnFields" : [ "*", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "dac376e2-42f6-49df-8ad6-edf0d17c6d47",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "facet",
        "id" : "b157e59d-af83-426b-a595-6e3d35c305a9",
        "fieldFacets" : [ {
          "field" : "aggr_count_i",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "doc_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aggr_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aggr_type_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aggr_job_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "flag_s",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "b157e59d-af83-426b-a595-6e3d35c305a9",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "solr-query",
        "id" : "214e6d57-17d1-459e-884f-1d1b4071908a",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "214e6d57-17d1-459e-884f-1d1b4071908a",
        "properties" : {
          "autoCreated" : true
        }
      } ],
      "properties" : {
        "secretSourcePipelineId" : "SignalsBrowserAggregated"
      }
    }, {
      "id" : "name-browser",
      "stages" : [ {
        "type" : "set-params",
        "id" : "nzv",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "nzv"
      }, {
        "type" : "set-params",
        "id" : "v8g",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "v8g"
      }, {
        "type" : "set-params",
        "id" : "2i",
        "params" : [ {
          "key" : "fq",
          "value" : "_lw_data_source_s:(\"aero-names-found\" \"aero-names-official\")",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "filter to name records",
        "licensed" : true,
        "secretSourceStageId" : "2i"
      }, {
        "type" : "text-tagger",
        "id" : "03a66367-40a3-4534-a952-fc33f55dc64f",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "03a66367-40a3-4534-a952-fc33f55dc64f",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "recommendation",
        "id" : "55fda8d8-9a3a-4dcf-9a02-ebd6628be1b2",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "55fda8d8-9a3a-4dcf-9a02-ebd6628be1b2",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "search-fields",
        "id" : "5f62c085-b6ce-4213-915b-807ec20ee2ab",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "full_name_t",
          "boost" : 20.0
        }, {
          "field" : "first_name_t"
        }, {
          "field" : "flast_t"
        }, {
          "field" : "fml_t"
        }, {
          "field" : "last_name_t"
        }, {
          "field" : "nickname_t"
        }, {
          "field" : "fmlast_t"
        } ],
        "returnFields" : [ "id", "score", "name_t", "foundName_t", "full_name_t", "first_name_t", "flast_t", "fml_t", "last_name_t", "nickname_t", "fmlast_t" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "5f62c085-b6ce-4213-915b-807ec20ee2ab",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "facet",
        "id" : "41f079ef-44d6-4b3c-a413-623db5fb2b86",
        "fieldFacets" : [ {
          "field" : "_lw_data_source_s",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "41f079ef-44d6-4b3c-a413-623db5fb2b86",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "query-rules",
        "id" : "cdae372e-59ad-4f87-8a64-044878780fb4",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cdae372e-59ad-4f87-8a64-044878780fb4",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "solr-query",
        "id" : "9b76bb1f-7cce-42fd-b976-da1c9443445f",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "9b76bb1f-7cce-42fd-b976-da1c9443445f",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "query-rules-augment-response",
        "id" : "1d288d72-7a55-4b05-87f3-5813839fdd01",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "1d288d72-7a55-4b05-87f3-5813839fdd01",
        "properties" : {
          "autoCreated" : true
        }
      } ],
      "properties" : {
        "secretSourcePipelineId" : "name-browser"
      }
    }, {
      "id" : "superman",
      "stages" : [ {
        "type" : "landing-pages",
        "id" : "ln",
        "queryParam" : "q",
        "matchCount" : 1,
        "rules" : [ {
          "keyword" : "test",
          "mode" : "match",
          "url" : "https://www.acme-yyyy.com"
        } ],
        "type" : "landing-pages",
        "skip" : true,
        "label" : "Test landing page",
        "licensed" : true,
        "secretSourceStageId" : "ln"
      }, {
        "type" : "set-params",
        "id" : "z2",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_audience_s:(children enfants scientists)",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to audience",
        "licensed" : true,
        "secretSourceStageId" : "z2"
      }, {
        "type" : "set-params",
        "id" : "rc8",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_subject_s:(\"Home education\" \"Éducation à domicile\" \"agriculture\")",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Filter to specific dcterms values",
        "licensed" : true,
        "secretSourceStageId" : "rc8"
      }, {
        "type" : "set-params",
        "id" : "lxuo",
        "params" : [ {
          "key" : "fq",
          "value" : "_lw_data_source_s:\"ca-gov-parsing-test\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to datasource",
        "licensed" : true,
        "secretSourceStageId" : "lxuo"
      }, {
        "type" : "set-params",
        "id" : "2ud",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        }, {
          "key" : "hl.snippets",
          "value" : "3",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "2ud"
      }, {
        "type" : "set-params",
        "id" : "0o",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "0o"
      }, {
        "type" : "search-fields",
        "id" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "title_t",
          "boost" : 5.0
        }, {
          "field" : "_text_",
          "boost" : 0.01
        }, {
          "field" : "body_t",
          "boost" : 1.0
        }, {
          "field" : "description_t",
          "boost" : 3.0
        }, {
          "field" : "keywords_txt",
          "boost" : 5.0
        } ],
        "returnFields" : [ "id", "title_t", "score", "description_t", "keywords_txt", "_lw_data_source_s", "fetchedDate_dt", "_lw_batch_id_s" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9"
      }, {
        "type" : "javascript-query",
        "id" : "pn",
        "script" : "function(request, response, ctx){\n\n  var keys = ctx.getProperties();\n  logger.warn(\"------------ keys: \" + keys);\n  var lpages = ctx.getProperty(\"landing-pages\");\n  logger.warn(\"------------ lpages: \" + lpages);\n\n  request.addParam(\"lpages\", lpages);\n\n  logger.warn(\"---------- TEST END SEAN ----------- \");\n    \n}\n",
        "shareState" : false,
        "type" : "javascript-query",
        "skip" : true,
        "label" : "Test response",
        "licensed" : true,
        "secretSourceStageId" : "pn"
      }, {
        "type" : "set-params",
        "id" : "cki",
        "params" : [ {
          "key" : "qf",
          "value" : "title_t^5 url_t^4 description_t^3 body_t _text_$0.01",
          "policy" : "default"
        }, {
          "key" : "fl",
          "value" : "id score title_t description_t fetchedDate_dt ",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Set Query Fields params",
        "licensed" : true,
        "secretSourceStageId" : "cki"
      }, {
        "type" : "facet",
        "id" : "8e04cae3-41c7-44d2-894d-804800269229",
        "fieldFacets" : [ {
          "field" : "_lw_batch_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "_lw_data_source_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fetchedDate_dt",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mimeType_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aaa_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "parent_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "tag_ss",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8e04cae3-41c7-44d2-894d-804800269229",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "text-tagger",
        "id" : "788fa5e2-6691-4121-98e1-eb3cf81e2805",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "788fa5e2-6691-4121-98e1-eb3cf81e2805"
      }, {
        "type" : "recommendation",
        "id" : "cdd8455f-1039-47b6-a0e8-137809589ce5",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cdd8455f-1039-47b6-a0e8-137809589ce5"
      }, {
        "type" : "query-rules",
        "id" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961"
      }, {
        "type" : "solr-query",
        "id" : "a7c7886d-229c-469d-9802-1593ad8adb9f",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "a7c7886d-229c-469d-9802-1593ad8adb9f"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "7bacff2b-cf35-4524-8f91-14815b82edcd",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "7bacff2b-cf35-4524-8f91-14815b82edcd"
      }, {
        "type" : "query-logging",
        "id" : "ey2",
        "detailed" : true,
        "type" : "query-logging",
        "skip" : true,
        "label" : "test logging",
        "licensed" : true,
        "secretSourceStageId" : "ey2"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "superman"
      }
    }, {
      "id" : "system-logs-browser",
      "stages" : [ {
        "type" : "set-params",
        "id" : "91n",
        "params" : [ {
          "key" : "sort",
          "value" : "timestamp_tdt desc",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Sort Timestamp desc",
        "licensed" : true,
        "secretSourceStageId" : "91n"
      }, {
        "type" : "set-params",
        "id" : "70l",
        "params" : [ {
          "key" : "pf",
          "value" : "logmessage_txt^10 message_txt^10",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "phrase field",
        "licensed" : true,
        "secretSourceStageId" : "70l"
      }, {
        "type" : "set-params",
        "id" : "4oe",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "HL params",
        "licensed" : true,
        "secretSourceStageId" : "4oe"
      }, {
        "type" : "set-params",
        "id" : "wagj",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Q.alt",
        "licensed" : true,
        "secretSourceStageId" : "wagj"
      }, {
        "type" : "set-params",
        "id" : "67b",
        "params" : [ {
          "key" : "fq",
          "value" : "timestamp_tdt:[NOW/MINUTE-5MINUTES TO *]",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Filter to recent messages",
        "licensed" : true,
        "secretSourceStageId" : "67b"
      }, {
        "type" : "set-params",
        "id" : "59a",
        "params" : [ {
          "key" : "fq",
          "value" : "-mdc_job_s:spark*",
          "policy" : "append"
        }, {
          "key" : "fq",
          "value" : "-cause_file_s:(Ignite* SparkJobTask.java GridClosureProcessor.java ComputeTaskAdapter.java)",
          "policy" : "append"
        }, {
          "key" : "fq",
          "value" : "-cause_class_s:(\"org.apache.ignite*\")",
          "policy" : "append"
        }, {
          "key" : "fq",
          "value" : "-file_s:(\"/opt/fusion/var/log/api/spark-driver-default.log\" \"/opt/lucidworks/fusion/4.2.6/var/log/api/spark-driver-default.log\")",
          "policy" : "append"
        }, {
          "key" : "fq",
          "value" : "-logger_class_s:(spark.client.SparkJobTask spark.job.SparkJobManager scheduler* \"apollo.component.DefaultSearchClusterRegistrar$SearchClusterWatcher\")",
          "policy" : "append"
        }, {
          "key" : "fq",
          "value" : "-level_s:INFO",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Filter out noise",
        "licensed" : true,
        "secretSourceStageId" : "59a"
      }, {
        "type" : "set-params",
        "id" : "3zk",
        "params" : [ {
          "key" : "fq",
          "value" : "-service_s:(proxy zookeeper agent)",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "Filter out noisy services (proxy)",
        "licensed" : true,
        "secretSourceStageId" : "3zk"
      }, {
        "type" : "text-tagger",
        "id" : "e8b8fa10-7215-4b55-8fc1-fc55224ec0d3",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "e8b8fa10-7215-4b55-8fc1-fc55224ec0d3"
      }, {
        "type" : "recommendation",
        "id" : "0dbadf96-3871-48fc-acdd-3f7d47382cd3",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "0dbadf96-3871-48fc-acdd-3f7d47382cd3"
      }, {
        "type" : "search-fields",
        "id" : "36d5a725-9e19-4b3b-8593-041142bf7993",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "_text_",
          "boost" : 0.01
        }, {
          "field" : "logmessage_txt",
          "boost" : 1.0
        }, {
          "field" : "message_txt",
          "boost" : 1.0
        } ],
        "returnFields" : [ "*", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "36d5a725-9e19-4b3b-8593-041142bf7993"
      }, {
        "type" : "facet",
        "id" : "890a1e71-6886-48a3-b923-5078706250ac",
        "fieldFacets" : [ {
          "field" : "file_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "level_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mdc_datasourceId_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mdc_job_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mdc_jobRunId_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "service_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "timestamp_tdt",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "890a1e71-6886-48a3-b923-5078706250ac",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "query-rules",
        "id" : "3f3ad0f7-1b82-415f-a946-9e5224ea0ccc",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "3f3ad0f7-1b82-415f-a946-9e5224ea0ccc"
      }, {
        "type" : "solr-query",
        "id" : "9b3d191e-0f45-4aee-99c7-bf5569586e90",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "9b3d191e-0f45-4aee-99c7-bf5569586e90"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "7a3c685a-aa5e-4d99-bf92-ad9d326fc524",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "7a3c685a-aa5e-4d99-bf92-ad9d326fc524"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "system-logs-browser"
      }
    }, {
      "id" : "test",
      "stages" : [ {
        "type" : "landing-pages",
        "id" : "ln",
        "queryParam" : "q",
        "matchCount" : 1,
        "rules" : [ {
          "keyword" : "test",
          "mode" : "match",
          "url" : "https://www.acme-yyyy.com"
        } ],
        "type" : "landing-pages",
        "skip" : true,
        "label" : "Test landing page",
        "licensed" : true,
        "secretSourceStageId" : "ln"
      }, {
        "type" : "set-params",
        "id" : "z2",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_audience_s:(children enfants scientists)",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to audience",
        "licensed" : true,
        "secretSourceStageId" : "z2"
      }, {
        "type" : "set-params",
        "id" : "rc8",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_subject_s:(\"Home education\" \"Éducation à domicile\" \"agriculture\")",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Filter to specific dcterms values",
        "licensed" : true,
        "secretSourceStageId" : "rc8"
      }, {
        "type" : "set-params",
        "id" : "lxuo",
        "params" : [ {
          "key" : "fq",
          "value" : "_lw_data_source_s:\"ca-gov-parsing-test\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to datasource",
        "licensed" : true,
        "secretSourceStageId" : "lxuo"
      }, {
        "type" : "set-params",
        "id" : "2ud",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        }, {
          "key" : "hl.snippets",
          "value" : "3",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "2ud"
      }, {
        "type" : "set-params",
        "id" : "0o",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "0o"
      }, {
        "type" : "search-fields",
        "id" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "title_t",
          "boost" : 5.0
        }, {
          "field" : "_text_",
          "boost" : 0.01
        }, {
          "field" : "body_t",
          "boost" : 1.0
        }, {
          "field" : "description_t",
          "boost" : 3.0
        }, {
          "field" : "keywords_txt",
          "boost" : 5.0
        } ],
        "returnFields" : [ "id", "title_t", "score", "description_t", "keywords_txt", "_lw_data_source_s", "fetchedDate_dt", "_lw_batch_id_s" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9"
      }, {
        "type" : "javascript-query",
        "id" : "pn",
        "script" : "function(request, response, ctx){\n\n  var keys = ctx.getProperties();\n  logger.warn(\"------------ keys: \" + keys);\n  var lpages = ctx.getProperty(\"landing-pages\");\n  logger.warn(\"------------ lpages: \" + lpages);\n\n  request.addParam(\"lpages\", lpages);\n\n  logger.warn(\"---------- TEST END SEAN ----------- \");\n    \n}\n",
        "shareState" : false,
        "type" : "javascript-query",
        "skip" : true,
        "label" : "Test response",
        "licensed" : true,
        "secretSourceStageId" : "pn"
      }, {
        "type" : "set-params",
        "id" : "cki",
        "params" : [ {
          "key" : "qf",
          "value" : "title_t^5 url_t^4 description_t^3 body_t _text_$0.01",
          "policy" : "default"
        }, {
          "key" : "fl",
          "value" : "id score title_t description_t fetchedDate_dt ",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Set Query Fields params",
        "licensed" : true,
        "secretSourceStageId" : "cki"
      }, {
        "type" : "facet",
        "id" : "8e04cae3-41c7-44d2-894d-804800269229",
        "fieldFacets" : [ {
          "field" : "_lw_batch_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "_lw_data_source_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fetchedDate_dt",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mimeType_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aaa_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "parent_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "tag_ss",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8e04cae3-41c7-44d2-894d-804800269229",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "text-tagger",
        "id" : "788fa5e2-6691-4121-98e1-eb3cf81e2805",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "788fa5e2-6691-4121-98e1-eb3cf81e2805"
      }, {
        "type" : "recommendation",
        "id" : "cdd8455f-1039-47b6-a0e8-137809589ce5",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cdd8455f-1039-47b6-a0e8-137809589ce5"
      }, {
        "type" : "query-rules",
        "id" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961"
      }, {
        "type" : "solr-query",
        "id" : "a7c7886d-229c-469d-9802-1593ad8adb9f",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "a7c7886d-229c-469d-9802-1593ad8adb9f"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "7bacff2b-cf35-4524-8f91-14815b82edcd",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "7bacff2b-cf35-4524-8f91-14815b82edcd"
      }, {
        "type" : "query-logging",
        "id" : "ey2",
        "detailed" : true,
        "type" : "query-logging",
        "skip" : true,
        "label" : "test logging",
        "licensed" : true,
        "secretSourceStageId" : "ey2"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test"
      }
    }, {
      "id" : "test-question-answering",
      "stages" : [ {
        "type" : "search-fields",
        "id" : "fa0c59db-95c0-49fc-8562-13f7a59e0224",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ ],
        "returnFields" : [ "*", "compressed_document_vector_s", "document_clusters_ss", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "fa0c59db-95c0-49fc-8562-13f7a59e0224"
      }, {
        "type" : "fusion-reranking",
        "id" : "443da538-107b-4194-91e5-19f595f8d6dc",
        "rowsFromSolrToRerank" : 500,
        "type" : "fusion-reranking",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "443da538-107b-4194-91e5-19f595f8d6dc"
      }, {
        "type" : "tf-deep-encoding-query",
        "id" : "4a87fece-7add-4f2f-80f4-3274ae38e7c9",
        "modelId" : "sample_qna_model.zip",
        "queryFeatureField" : "q",
        "vectorContextKey" : "query_vector",
        "clustersContextKey" : "query_clusters",
        "distancesContextKey" : "query_distances",
        "numClusters" : 0,
        "documentsClustersField" : "document_clusters_ss",
        "failOnError" : false,
        "storeInContext" : true,
        "type" : "tf-deep-encoding-query",
        "skip" : false,
        "label" : "Query Encoding",
        "licensed" : false,
        "secretSourceStageId" : "4a87fece-7add-4f2f-80f4-3274ae38e7c9"
      }, {
        "type" : "stop-filter-query-stage",
        "id" : "e91a4c0e-396e-455f-a4ab-c48dd50427bd",
        "inputParam" : "q",
        "stopWords" : "a,about,actual,actually,am,an,and,answer,any,anyone,anything,anyway,are,ask,asked,asking,at,away,based,basically,be,been,being,btw,by,can,consider,considered,could,did,do,does,doing,done,especially,essentially,etc,feel,find,for,found,from,generally,get,getting,give,given,giving,go,goes,gone,got,guess,had,happen,happened,happening,has,have,having,he,hello,help,hence,her,here,hers,hey,him,his,hope,hoped,however,i,I'd,i'm,'m,'ll,'d,ie,if,im,in,into,is,it,its,just,keeping,kept,knew,know,let,like,likely,list,look,looked,looking,makes,making,maybe,me,mention,mentioned,might,mind,much,my,need,needed,of,off,on,onto,otherwise,our,ours,out,perhaps,please,possible,possibly,pretty,probably,provide,provided,question,quite,rather,really,regard,regarding,relatively,said,saw,say,saying,search,searching,see,seeing,seem,seemed,seeming,seems,seen,select,she,should,show,simply,so,some,somehow,something,specifically,still,such,suggest,suggested,sure,take,taken,taking,tell,thank,thanks,that,the,their,them,then,there,thereby,therefore,therein,these,they,thing,think,thinking,this,those,though,thought,through,throughout,thru,thus,to,too,took,totally,toward,towards,tried,try,trying,up,upon,us,use,used,using,usually,very,via,want,wanted,was,we,went,were,what,will,wish,wished,with,within,wonder,wondering,would,yet,you,your,yours",
        "type" : "stop-filter-query-stage",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "e91a4c0e-396e-455f-a4ab-c48dd50427bd"
      }, {
        "type" : "query-escaping-query-stage",
        "id" : "5a49b7af-3b4f-42ba-85db-dcd2aac94010",
        "inputParam" : "q",
        "type" : "query-escaping-query-stage",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "5a49b7af-3b4f-42ba-85db-dcd2aac94010"
      }, {
        "type" : "solr-query",
        "id" : "f0661501-10bf-4369-b222-305fda0f94c9",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "f0661501-10bf-4369-b222-305fda0f94c9"
      }, {
        "type" : "per-result-vectors-distance",
        "id" : "72709b7a-daf6-40df-a19b-a664fb394fec",
        "queryVectorContextKey" : "query_vector",
        "documentVectorField" : "compressed_document_vector_s",
        "keepDocumentVectorField" : false,
        "distanceType" : "cosine_similarity",
        "documentDistanceResultField" : "vectors_distance",
        "failOnError" : false,
        "requiredLicensedCapability" : "fusion.ai.qa",
        "type" : "per-result-vectors-distance",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "72709b7a-daf6-40df-a19b-a664fb394fec",
        "requiredLicensedCapability" : "fusion.ai.qa"
      }, {
        "type" : "response-math-expression",
        "id" : "7d306457-1a45-404f-aa5f-0581a38797fc",
        "expression" : "0.3 * score / max_score + 0.7 * vectors_distance",
        "resultFieldName" : "ensemble_score",
        "requiredLicensedCapability" : "fusion.ai.qa",
        "type" : "response-math-expression",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "7d306457-1a45-404f-aa5f-0581a38797fc",
        "requiredLicensedCapability" : "fusion.ai.qa"
      }, {
        "type" : "result-doc-field-sorting",
        "id" : "d6281451-82ae-4d99-a768-363b330ccfeb",
        "sortField" : "ensemble_score",
        "sortOrder" : "desc",
        "failOnError" : false,
        "type" : "result-doc-field-sorting",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "d6281451-82ae-4d99-a768-363b330ccfeb"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test-question-answering"
      }
    }, {
      "id" : "test-question-answering-dual-fields",
      "stages" : [ {
        "type" : "search-fields",
        "id" : "19a70162-a7c7-43dc-813d-e231e0407a62",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ ],
        "returnFields" : [ "*", "compressed_document_vector_s", "document_clusters_ss", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "19a70162-a7c7-43dc-813d-e231e0407a62"
      }, {
        "type" : "fusion-reranking",
        "id" : "90bf121e-3150-48aa-8506-32b4db6ff075",
        "rowsFromSolrToRerank" : 500,
        "type" : "fusion-reranking",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "90bf121e-3150-48aa-8506-32b4db6ff075"
      }, {
        "type" : "tf-deep-encoding-query",
        "id" : "1db4bcc3-d3e5-4054-9bb6-25cc34aa9ebd",
        "modelId" : "sample_qna_model.zip",
        "queryFeatureField" : "q",
        "vectorContextKey" : "query_vector",
        "clustersContextKey" : "query_clusters",
        "distancesContextKey" : "query_distances",
        "numClusters" : 0,
        "documentsClustersField" : "question_clusters_ss",
        "failOnError" : false,
        "storeInContext" : true,
        "type" : "tf-deep-encoding-query",
        "skip" : false,
        "label" : "Query Encoding",
        "licensed" : false,
        "secretSourceStageId" : "1db4bcc3-d3e5-4054-9bb6-25cc34aa9ebd"
      }, {
        "type" : "stop-filter-query-stage",
        "id" : "aadd2ff8-f390-4fec-a304-5c7d5c835deb",
        "inputParam" : "q",
        "stopWords" : "a,about,actual,actually,am,an,and,answer,any,anyone,anything,anyway,are,ask,asked,asking,at,away,based,basically,be,been,being,btw,by,can,consider,considered,could,did,do,does,doing,done,especially,essentially,etc,feel,find,for,found,from,generally,get,getting,give,given,giving,go,goes,gone,got,guess,had,happen,happened,happening,has,have,having,he,hello,help,hence,her,here,hers,hey,him,his,hope,hoped,however,i,I'd,i'm,'m,'ll,'d,ie,if,im,in,into,is,it,its,just,keeping,kept,knew,know,let,like,likely,list,look,looked,looking,makes,making,maybe,me,mention,mentioned,might,mind,much,my,need,needed,of,off,on,onto,otherwise,our,ours,out,perhaps,please,possible,possibly,pretty,probably,provide,provided,question,quite,rather,really,regard,regarding,relatively,said,saw,say,saying,search,searching,see,seeing,seem,seemed,seeming,seems,seen,select,she,should,show,simply,so,some,somehow,something,specifically,still,such,suggest,suggested,sure,take,taken,taking,tell,thank,thanks,that,the,their,them,then,there,thereby,therefore,therein,these,they,thing,think,thinking,this,those,though,thought,through,throughout,thru,thus,to,too,took,totally,toward,towards,tried,try,trying,up,upon,us,use,used,using,usually,very,via,want,wanted,was,we,went,were,what,will,wish,wished,with,within,wonder,wondering,would,yet,you,your,yours",
        "type" : "stop-filter-query-stage",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "aadd2ff8-f390-4fec-a304-5c7d5c835deb"
      }, {
        "type" : "query-escaping-query-stage",
        "id" : "6e6e41dd-8469-41b1-a8c9-26bd7914338b",
        "inputParam" : "q",
        "type" : "query-escaping-query-stage",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "6e6e41dd-8469-41b1-a8c9-26bd7914338b"
      }, {
        "type" : "solr-query",
        "id" : "bb9efd24-25f2-4d41-b5b8-ff3836b6eb93",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "bb9efd24-25f2-4d41-b5b8-ff3836b6eb93"
      }, {
        "type" : "per-result-vectors-distance",
        "id" : "b390fa2c-b114-4628-8039-7d25b8e4a4f1",
        "queryVectorContextKey" : "query_vector",
        "documentVectorField" : "compressed_question_vector_s",
        "keepDocumentVectorField" : false,
        "distanceType" : "cosine_similarity",
        "documentDistanceResultField" : "qq_distance",
        "failOnError" : false,
        "requiredLicensedCapability" : "fusion.ai.qa",
        "type" : "per-result-vectors-distance",
        "skip" : false,
        "label" : "QQ Vectors Distance",
        "licensed" : false,
        "secretSourceStageId" : "b390fa2c-b114-4628-8039-7d25b8e4a4f1",
        "requiredLicensedCapability" : "fusion.ai.qa"
      }, {
        "type" : "per-result-vectors-distance",
        "id" : "00d948bb-d5aa-48fe-ad73-9522d300c34d",
        "queryVectorContextKey" : "query_vector",
        "documentVectorField" : "compressed_answer_vector_s",
        "keepDocumentVectorField" : false,
        "distanceType" : "cosine_similarity",
        "documentDistanceResultField" : "qa_distance",
        "failOnError" : false,
        "requiredLicensedCapability" : "fusion.ai.qa",
        "type" : "per-result-vectors-distance",
        "skip" : false,
        "label" : "QA Vectors Distance",
        "licensed" : false,
        "secretSourceStageId" : "00d948bb-d5aa-48fe-ad73-9522d300c34d",
        "requiredLicensedCapability" : "fusion.ai.qa"
      }, {
        "type" : "response-math-expression",
        "id" : "e7f0e205-d5d2-41a3-9af9-90e0073797d0",
        "expression" : "0.2 * score / max_score + 0.4 * qq_distance + 0.4 * qa_distance",
        "resultFieldName" : "ensemble_score",
        "requiredLicensedCapability" : "fusion.ai.qa",
        "type" : "response-math-expression",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "e7f0e205-d5d2-41a3-9af9-90e0073797d0",
        "requiredLicensedCapability" : "fusion.ai.qa"
      }, {
        "type" : "result-doc-field-sorting",
        "id" : "58478fea-e6ab-4364-9fa4-6516f1545106",
        "sortField" : "ensemble_score",
        "sortOrder" : "desc",
        "failOnError" : false,
        "type" : "result-doc-field-sorting",
        "skip" : false,
        "licensed" : false,
        "secretSourceStageId" : "58478fea-e6ab-4364-9fa4-6516f1545106"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "test-question-answering-dual-fields"
      }
    }, {
      "id" : "upval-browser",
      "stages" : [ {
        "type" : "landing-pages",
        "id" : "ln",
        "queryParam" : "q",
        "matchCount" : 1,
        "rules" : [ {
          "keyword" : "test",
          "mode" : "match",
          "url" : "https://www.acme-yyyy.com"
        } ],
        "type" : "landing-pages",
        "skip" : true,
        "label" : "Test landing page",
        "licensed" : true,
        "secretSourceStageId" : "ln"
      }, {
        "type" : "set-params",
        "id" : "z2",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_audience_s:(children enfants scientists)",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to audience",
        "licensed" : true,
        "secretSourceStageId" : "z2"
      }, {
        "type" : "set-params",
        "id" : "rc8",
        "params" : [ {
          "key" : "fq",
          "value" : "dcterms_subject_s:(\"Home education\" \"Éducation à domicile\" \"agriculture\")",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Filter to specific dcterms values",
        "licensed" : true,
        "secretSourceStageId" : "rc8"
      }, {
        "type" : "set-params",
        "id" : "lxuo",
        "params" : [ {
          "key" : "fq",
          "value" : "_lw_data_source_s:\"ca-gov-parsing-test\"",
          "policy" : "append"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "filter to datasource",
        "licensed" : true,
        "secretSourceStageId" : "lxuo"
      }, {
        "type" : "set-params",
        "id" : "2ud",
        "params" : [ {
          "key" : "hl",
          "value" : "on",
          "policy" : "default"
        }, {
          "key" : "hl.fl",
          "value" : "*",
          "policy" : "default"
        }, {
          "key" : "hl.snippets",
          "value" : "3",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "hl params",
        "licensed" : true,
        "secretSourceStageId" : "2ud"
      }, {
        "type" : "set-params",
        "id" : "0o",
        "params" : [ {
          "key" : "q.alt",
          "value" : "*:*",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : false,
        "label" : "q.alt",
        "licensed" : true,
        "secretSourceStageId" : "0o"
      }, {
        "type" : "search-fields",
        "id" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ {
          "field" : "title_t",
          "boost" : 5.0
        }, {
          "field" : "_text_",
          "boost" : 0.01
        }, {
          "field" : "body_t",
          "boost" : 1.0
        }, {
          "field" : "description_t",
          "boost" : 3.0
        }, {
          "field" : "keywords_txt",
          "boost" : 5.0
        } ],
        "returnFields" : [ "id", "title_t", "score", "description_t", "keywords_txt", "_lw_data_source_s", "fetchedDate_dt", "_lw_batch_id_s" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "f6e037d0-4bd4-4757-99fe-fdf4c160f7c9"
      }, {
        "type" : "javascript-query",
        "id" : "pn",
        "script" : "function(request, response, ctx){\n\n  var keys = ctx.getProperties();\n  logger.warn(\"------------ keys: \" + keys);\n  var lpages = ctx.getProperty(\"landing-pages\");\n  logger.warn(\"------------ lpages: \" + lpages);\n\n  request.addParam(\"lpages\", lpages);\n\n  logger.warn(\"---------- TEST END SEAN ----------- \");\n    \n}\n",
        "shareState" : false,
        "type" : "javascript-query",
        "skip" : true,
        "label" : "Test response",
        "licensed" : true,
        "secretSourceStageId" : "pn"
      }, {
        "type" : "set-params",
        "id" : "cki",
        "params" : [ {
          "key" : "qf",
          "value" : "title_t^5 url_t^4 description_t^3 body_t _text_$0.01",
          "policy" : "default"
        }, {
          "key" : "fl",
          "value" : "id score title_t description_t fetchedDate_dt ",
          "policy" : "default"
        } ],
        "type" : "set-params",
        "skip" : true,
        "label" : "Set Query Fields params",
        "licensed" : true,
        "secretSourceStageId" : "cki"
      }, {
        "type" : "facet",
        "id" : "8e04cae3-41c7-44d2-894d-804800269229",
        "fieldFacets" : [ {
          "field" : "_lw_batch_id_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "_lw_data_source_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "fetchedDate_dt",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "mimeType_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "aaa_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "parent_s",
          "minCount" : 1,
          "missing" : false
        }, {
          "field" : "length_l",
          "minCount" : 1,
          "missing" : false
        } ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8e04cae3-41c7-44d2-894d-804800269229",
        "properties" : {
          "autoCreated" : true
        }
      }, {
        "type" : "text-tagger",
        "id" : "788fa5e2-6691-4121-98e1-eb3cf81e2805",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "788fa5e2-6691-4121-98e1-eb3cf81e2805"
      }, {
        "type" : "recommendation",
        "id" : "cdd8455f-1039-47b6-a0e8-137809589ce5",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "cdd8455f-1039-47b6-a0e8-137809589ce5"
      }, {
        "type" : "query-rules",
        "id" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "41dd877a-c9a7-4f70-a7bf-25b3b735d961"
      }, {
        "type" : "solr-query",
        "id" : "a7c7886d-229c-469d-9802-1593ad8adb9f",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "a7c7886d-229c-469d-9802-1593ad8adb9f"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "7bacff2b-cf35-4524-8f91-14815b82edcd",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : true,
        "licensed" : true,
        "secretSourceStageId" : "7bacff2b-cf35-4524-8f91-14815b82edcd"
      }, {
        "type" : "query-logging",
        "id" : "ey2",
        "detailed" : true,
        "type" : "query-logging",
        "skip" : true,
        "label" : "test logging",
        "licensed" : true,
        "secretSourceStageId" : "ey2"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "upval-browser"
      }
    }, {
      "id" : "zipcodes",
      "stages" : [ {
        "type" : "text-tagger",
        "id" : "aade1f6f-9922-4c10-a342-8c24fed90cfe",
        "useEmbeddedSolrServer" : false,
        "paramToTag" : "q",
        "spell_corrections_enabled" : true,
        "phrase_boosting_enabled" : true,
        "tail_rewrites_enabled" : true,
        "phraseBoost" : 2.0,
        "phraseSlop" : 10,
        "synonymExpansionBoost" : 2.0,
        "synonym_expansion_enabled" : true,
        "overlaps" : "ALL",
        "params" : [ ],
        "type" : "text-tagger",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "aade1f6f-9922-4c10-a342-8c24fed90cfe"
      }, {
        "type" : "recommendation",
        "id" : "986a3a65-f349-4e02-97f4-7e25652cf939",
        "numRecommendations" : 10,
        "numSignals" : 100,
        "aggrType" : "click@doc_id,filters,query",
        "boostId" : "id",
        "boostingMethod" : "query-param",
        "boostingParam" : "boost",
        "queryParams" : [ {
          "key" : "qf",
          "value" : "query_t"
        }, {
          "key" : "pf",
          "value" : "query_t^50"
        }, {
          "key" : "pf",
          "value" : "query_t~3^20"
        }, {
          "key" : "pf2",
          "value" : "query_t^20"
        }, {
          "key" : "pf2",
          "value" : "query_t~3^10"
        }, {
          "key" : "pf3",
          "value" : "query_t^10"
        }, {
          "key" : "pf3",
          "value" : "query_t~3^5"
        }, {
          "key" : "boost",
          "value" : "map(query({!field f=query_s v=$q}),0,0,1,20)"
        }, {
          "key" : "mm",
          "value" : "50%"
        }, {
          "key" : "defType",
          "value" : "edismax"
        }, {
          "key" : "sort",
          "value" : "score desc, weight_d desc"
        } ],
        "rollupField" : "doc_id_s",
        "rollupWeightField" : "weight_d",
        "weightExpression" : "math:log(weight_d + 1) + 10 * math:log(score+1)",
        "rollupWeightStrategy" : "max",
        "type" : "recommendation",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "986a3a65-f349-4e02-97f4-7e25652cf939"
      }, {
        "type" : "search-fields",
        "id" : "c9623e60-446f-48ae-8e96-dd9b56c90057",
        "rows" : 10,
        "start" : 0,
        "queryFields" : [ ],
        "returnFields" : [ "*", "score" ],
        "type" : "search-fields",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "c9623e60-446f-48ae-8e96-dd9b56c90057"
      }, {
        "type" : "facet",
        "id" : "b8feb70d-3609-46ce-91e7-1081b424ced5",
        "fieldFacets" : [ ],
        "type" : "facet",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "b8feb70d-3609-46ce-91e7-1081b424ced5"
      }, {
        "type" : "query-rules",
        "id" : "c5b3e6de-83e8-4eff-9333-1ab48aa1fe32",
        "useEmbeddedSolrServer" : false,
        "useOriginalQueryIfNoRulesMatch" : true,
        "matchPartialFilterQueries" : true,
        "handler" : "select",
        "method" : "POST",
        "ruleLimit" : "100",
        "params" : [ ],
        "hierarchicalFilter" : [ ],
        "headers" : [ ],
        "type" : "query-rules",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "c5b3e6de-83e8-4eff-9333-1ab48aa1fe32"
      }, {
        "type" : "solr-query",
        "id" : "2c37e300-e657-478c-bb60-9c021c31e264",
        "httpMethod" : "POST",
        "allowFederatedSearch" : false,
        "type" : "solr-query",
        "skip" : false,
        "responseSignalsEnabled" : true,
        "licensed" : true,
        "secretSourceStageId" : "2c37e300-e657-478c-bb60-9c021c31e264"
      }, {
        "type" : "query-rules-augment-response",
        "id" : "8dd8b237-47e6-4d3b-a315-bf3f5b3a5595",
        "facetLabelParseDelimiter" : "||",
        "type" : "query-rules-augment-response",
        "skip" : false,
        "licensed" : true,
        "secretSourceStageId" : "8dd8b237-47e6-4d3b-a315-bf3f5b3a5595"
      } ],
      "properties" : {
        "secretSourcePipelineId" : "zipcodes"
      }
    } ],
    "features" : {
      "test" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test",
        "params" : { },
        "enabled" : true
      }, {
        "name" : "signals",
        "collectionId" : "test",
        "params" : { },
        "enabled" : true
      } ],
      "test_job_reports" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_job_reports",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_job_reports",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_job_reports",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_job_reports",
        "params" : { },
        "enabled" : false
      } ],
      "test_query_rewrite" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_query_rewrite",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_query_rewrite",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_query_rewrite",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_query_rewrite",
        "params" : { },
        "enabled" : false
      } ],
      "test_query_rewrite_staging" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_query_rewrite_staging",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_query_rewrite_staging",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_query_rewrite_staging",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_query_rewrite_staging",
        "params" : { },
        "enabled" : false
      } ],
      "test_signals" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_signals",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_signals",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_signals",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_signals",
        "params" : { },
        "enabled" : false
      } ],
      "test_signals_aggr" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_signals_aggr",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_signals_aggr",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_signals_aggr",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_signals_aggr",
        "params" : { },
        "enabled" : false
      } ],
      "test_user_prefs" : [ {
        "name" : "partitionByTime",
        "collectionId" : "test_user_prefs",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "test_user_prefs",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "test_user_prefs",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "test_user_prefs",
        "params" : { },
        "enabled" : false
      } ],
      "zipcodes" : [ {
        "name" : "partitionByTime",
        "collectionId" : "zipcodes",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "zipcodes",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "zipcodes",
        "params" : { },
        "enabled" : true
      }, {
        "name" : "signals",
        "collectionId" : "zipcodes",
        "params" : { },
        "enabled" : true
      } ],
      "zipcodes_signals" : [ {
        "name" : "partitionByTime",
        "collectionId" : "zipcodes_signals",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "zipcodes_signals",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "zipcodes_signals",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "zipcodes_signals",
        "params" : { },
        "enabled" : false
      } ],
      "zipcodes_signals_aggr" : [ {
        "name" : "partitionByTime",
        "collectionId" : "zipcodes_signals_aggr",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "recommendations",
        "collectionId" : "zipcodes_signals_aggr",
        "params" : {
          "idField" : "id",
          "itemsForUser" : true,
          "itemsForQuery" : false,
          "itemsForItem" : true,
          "queriesForQuery" : false
        },
        "enabled" : false
      }, {
        "name" : "searchLogs",
        "collectionId" : "zipcodes_signals_aggr",
        "params" : { },
        "enabled" : false
      }, {
        "name" : "signals",
        "collectionId" : "zipcodes_signals_aggr",
        "params" : { },
        "enabled" : false
      } ]
    },
    "indexProfiles" : [ {
      "id" : "test",
      "indexPipeline" : "test",
      "collection" : "test",
      "parser" : "test",
      "params" : [ ]
    }, {
      "id" : "upval_parsers",
      "indexPipeline" : "upval_parsers",
      "collection" : "test",
      "parser" : "upval-json"
    }, {
      "id" : "zipcodes",
      "indexPipeline" : "zipcodes",
      "collection" : "zipcodes",
      "params" : [ ]
    } ],
    "queryProfiles" : [ {
      "id" : "test",
      "queryPipeline" : "test",
      "collection" : "test",
      "searchHandler" : "/select"
    }, {
      "id" : "test_rules_simulator",
      "queryPipeline" : "test",
      "collection" : "test",
      "searchHandler" : "/select",
      "params" : [ {
        "key" : "lw.rules.simulate",
        "value" : "test_query_rewrite_staging",
        "policy" : "default"
      }, {
        "key" : "lw.rules.debug",
        "value" : "1",
        "policy" : "default"
      }, {
        "key" : "lw.tagger.debug",
        "value" : "1",
        "policy" : "default"
      }, {
        "key" : "lw.skip_response_signal",
        "value" : "1",
        "policy" : "default"
      } ]
    }, {
      "id" : "zipcodes",
      "queryPipeline" : "zipcodes",
      "collection" : "zipcodes",
      "searchHandler" : "/select"
    } ],
    "parsers" : [ {
      "id" : "_lw_tmp_1644982843",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "archive",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "49711495-3086-4397-a893-f1e657ee5943",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "98e02bc8-d5f0-489a-872c-6cd144c2b609",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "1c2a1a45-a556-4654-a334-9c694175e2da",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "95aa126b-fb89-4db8-ae48-d53064bad975",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "963d8a90-633a-4be1-8c43-09cba05b809f",
        "charset" : "detect",
        "mappings" : [ ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "98238470-fdb8-4f31-95b7-93294752b3ce",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "d8902c40-ab74-4110-bc83-e8de69ea1db9",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "27f298a1-ba5c-4ba5-b559-9b350bea65f6",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ],
      "editPanel" : { }
    }, {
      "id" : "basic",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "archive",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "b1be1e98-ba00-49e7-95d6-91ad7b5c0485",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "0224ec40-1b04-4f53-b62f-05b1d7a0a537",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "a20db815-c122-4f13-925e-95879ae4824a",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "c86a35b3-4355-4bbb-ad83-db6ee5f69f22",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "b59f9c45-9c28-4732-b8a0-61bde4a5abe9",
        "charset" : "detect",
        "mappings" : [ ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "a2925f53-f95f-46a2-a1c9-d2aa5908a40b",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "b53efd83-08de-4558-8aaa-3ec4ae4b3508",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "60712cef-34ab-4364-bf82-e1a9cad5b24f",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ]
    }, {
      "id" : "hpe-typeahead-csv",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "archive",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "2642d10a-db62-4e9f-8bf1-85ed43de05e3",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "413f37e2-4a8e-42f3-b139-cdee4b90df30",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "5563585c-b29f-48dc-96dd-3a82bdbdbf9e",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "3adec016-935c-4294-887d-5e681b7451e8",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "e29341de-3462-417a-81a8-6f720ce53931",
        "charset" : "detect",
        "mappings" : [ ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "7e7a9a5e-22d2-4f26-974d-f8874121b69e",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "df9aaa6f-4032-4483-9c5a-3de141d85163",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "26914630-1894-4800-b0ca-356d70867cb0",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ]
    }, {
      "id" : "html",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "html",
        "enabled" : true,
        "mediaTypes" : [ "text/html" ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "b93e8502-e3a3-4fa5-88bd-7e440f97656b",
        "charset" : "detect",
        "mappings" : [ {
          "selectRule" : "main",
          "field" : "main",
          "multivalued" : false
        }, {
          "selectRule" : "div.center2",
          "field" : "main",
          "multivalued" : false
        }, {
          "selectRule" : "div[role=main]",
          "field" : "main",
          "multivalued" : false
        }, {
          "selectRule" : "ol.breadcrumb>li:last-of-type",
          "field" : "bcrumb_last_seg_s",
          "multivalued" : false
        }, {
          "selectRule" : "body",
          "attribute" : "vocab",
          "field" : "body_vocab_s",
          "multivalued" : false
        }, {
          "selectRule" : "body",
          "attribute" : "typeof",
          "field" : "body_typeof_s",
          "multivalued" : false
        }, {
          "selectRule" : "h2",
          "attribute" : "",
          "field" : "h2_txt",
          "multivalued" : false
        } ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ],
      "editPanel" : { }
    }, {
      "id" : "sean-test-parsers",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "archive",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "a4d8e00a-a913-4875-a667-e742a8a204e1",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "6ec296f1-36cd-4477-aa78-4eec3cf80ac5",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "19af4c42-a324-4d71-aa04-f59cb7d387ad",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "eaeb1b8a-9cbb-4efb-97ff-6f3580a6828b",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "00201cb7-4eca-4c3f-b163-e7995ca0373d",
        "charset" : "detect",
        "mappings" : [ {
          "selectRule" : "script",
          "attribute" : "type",
          "field" : "aa_script_type_t",
          "multivalued" : true
        } ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "03b7c587-43ec-4a9a-b871-ba69273abde7",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "cf6d2b18-0858-4f23-b899-fc5bb67a3751",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "22fef2f7-e2de-415e-86c7-c05c120bf3d1",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ],
      "editPanel" : { }
    }, {
      "id" : "test",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "tikafork",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "1644285126664",
        "includeImages" : false,
        "addFailedDocs" : false,
        "contentEncoding" : "binary",
        "extractHtmlLinks" : false,
        "maxBytesReturned" : 100000000,
        "parseTimeoutMs" : 60000,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "archive",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "9ed91598-acf1-4872-b8f3-03f39c05c569",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "e426f9fe-b80d-450d-bf42-2ae43669df29",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "1805c679-89b5-4a54-b046-2a7caace1410",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "cb2c55df-7914-4f08-b18d-22b42b51363c",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "593c70e0-adcc-46c4-8eaf-a3b63655037a",
        "charset" : "detect",
        "mappings" : [ {
          "selectRule" : "script",
          "attribute" : "type",
          "field" : "aa_script_type_t",
          "multivalued" : true
        } ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "contentExtractionConfig" : {
          "extractContent" : true,
          "extractMetadata" : true,
          "preserveContentFormat" : true,
          "metadataPrefix" : ""
        },
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "7f2664a7-77b6-4fb4-9853-9b82d9d44f54",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "0f8b2eea-87b1-4fa4-ba33-7256dc212418",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : true,
        "addOriginalContent" : true,
        "contentEncoding" : "binary",
        "returnXml" : true,
        "keepOriginalStructure" : true,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "fed6ddbe-2a71-4bcf-901d-3c675e2e64a4",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ],
      "editPanel" : { }
    }, {
      "id" : "upval-json",
      "enableMediaTypeDetection" : true,
      "maxParserDepth" : 16,
      "parserStages" : [ {
        "type" : "archive",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "430200a1-d2d8-4931-a865-02205c978d0c",
        "alwaysDetect" : true,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "csv",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "5cc97cc7-4739-4a3c-86d2-b536e610effe",
        "charset" : "detect",
        "ignoreBOM" : false,
        "autoDetect" : true,
        "hasHeaders" : true,
        "headers" : [ ],
        "fillValue" : "<FILL>",
        "trimWhitespace" : true,
        "skipEmptyLines" : true,
        "includeRowNumber" : true,
        "commentHandling" : "ignore",
        "maxRowLength" : 10485760,
        "maxNumColumns" : 1000,
        "maxColumnChars" : 10485760,
        "columnHandling" : "default",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "json",
        "enabled" : true,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "d5145a93-eccf-4361-918d-9bd6610c54d2",
        "splitArrays" : true,
        "includePath" : false,
        "mappings" : [ ],
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "xml",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "00764723-6034-400c-b358-555cfa6f1cc1",
        "rootPaths" : [ "/" ],
        "maxSize" : 65536,
        "listHandling" : "multivalued",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "html",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "58ea0efd-40d9-4f48-9655-aa9f45bc7614",
        "charset" : "detect",
        "mappings" : [ ],
        "keepParent" : true,
        "extractHtmlLinks" : false,
        "extractBodyText" : true,
        "metatagsPrefix" : "",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "text",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "09bb61f0-5f34-4f58-82a0-0778856320e7",
        "charset" : "detect",
        "ignoreBOM" : false,
        "maxLength" : 1048576,
        "maxLineLength" : 1048576,
        "outputField" : "body",
        "splitLines" : false,
        "skipEmptyLines" : false,
        "skipHeaderLines" : 0,
        "trimWhitespace" : false,
        "commentHandling" : "include",
        "comment" : "#",
        "commentField" : "comment",
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "tika",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "72a31e27-d175-4fe9-ba45-287682c9dfcf",
        "includeImages" : false,
        "flattenCompound" : true,
        "addFailedDocs" : false,
        "addOriginalContent" : false,
        "contentEncoding" : "binary",
        "returnXml" : false,
        "keepOriginalStructure" : false,
        "extractHtmlLinks" : false,
        "extractOtherLinks" : false,
        "excludeContentTypes" : [ ],
        "zipBombCompressionRatio" : 200,
        "zipBombMaxDepth" : 200,
        "zipBombMaxPackageEntryDepth" : 20,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      }, {
        "type" : "fallback",
        "enabled" : false,
        "mediaTypes" : [ ],
        "pathPatterns" : [ ],
        "errorHandling" : "mark",
        "id" : "03524225-77eb-42a8-90af-5a1ae55ce929",
        "metadataOnly" : false,
        "maxBytesToKeep" : 1048576,
        "inheritMediaTypes" : true,
        "outputFieldPrefix" : ""
      } ]
    } ],
    "objectGroups" : [ {
      "id" : "4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "name" : "signals-test",
      "isSystem" : true,
      "description" : "Collection 'test' objects for signals support"
    }, {
      "id" : "f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "name" : "signals-zipcodes",
      "isSystem" : true,
      "description" : "Collection 'zipcodes' objects for signals support"
    } ],
    "links" : [ {
      "subject" : "app:test",
      "object" : "group:_shared",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "app:test",
      "object" : "spark:test_phrase_extraction",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "app:test",
      "object" : "spark:test_spell_correction",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "app:test",
      "object" : "spark:test_synonym_detection",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:193588__6_.service-manual.sample.pdf",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:Public_Schools.csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:Sample_Product SKU Numbers",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:Sample_Product SKU Numbers.csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:all_us_zipcodes.csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:sampleLocations.csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "blob:usernames-found.csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "collection:test_job_reports",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "collection:test_query_rewrite",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "collection:test_query_rewrite_staging",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "collection:test_user_prefs",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "index-pipeline:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "index-pipeline:test-question-answering",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "index-pipeline:test-question-answering-dual-fields",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "query-pipeline:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "query-pipeline:test-question-answering",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test",
      "object" : "query-pipeline:test-question-answering-dual-fields",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test_job_reports",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test_query_rewrite",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test_query_rewrite_staging",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test_query_rewrite_staging",
      "object" : "index-pipeline:test_query_rewrite_staging",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:test_user_prefs",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:zipcodes",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:zipcodes",
      "object" : "index-pipeline:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "collection:zipcodes",
      "object" : "query-pipeline:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "collection:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "collection:test_signals",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "collection:test_signals_aggr",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "spark:test_click_signals_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "spark:test_head_tail",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "spark:test_session_rollup",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "spark:test_user_item_preferences_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:4066cd8f-b004-4cc2-b6a7-356a70db38c3",
      "object" : "spark:test_user_query_history_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "collection:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "collection:zipcodes_signals",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "collection:zipcodes_signals_aggr",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "spark:zipcodes_click_signals_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "spark:zipcodes_head_tail",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "spark:zipcodes_session_rollup",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "spark:zipcodes_user_item_preferences_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "group:f91b65b6-8d92-4fb0-a170-20a8f9024f08",
      "object" : "spark:zipcodes_user_query_history_aggregation",
      "linkType" : "hasPart",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:_signals_ingest",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:aero-nameNormalizer",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:aero-names-found",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:basic",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:goc-generic",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:hpe-typeahead",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:lw-web-ppl",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:test",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:test-question-answering",
      "object" : "blob:sample_qna_model.zip",
      "linkType" : "dependsOn",
      "originator" : "com.lucidworks.apollo.component.LinkExtractingUpdateStrategy"
    }, {
      "subject" : "index-pipeline:test-question-answering-dual-fields",
      "object" : "blob:sample_qna_model.zip",
      "linkType" : "dependsOn",
      "originator" : "com.lucidworks.apollo.component.LinkExtractingUpdateStrategy"
    }, {
      "subject" : "index-pipeline:test_query_rewrite_staging",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-pipeline:upval_parsers",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:test",
      "object" : "collection:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:test",
      "object" : "index-pipeline:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:upval_parsers",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:upval_parsers",
      "object" : "collection:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:upval_parsers",
      "object" : "index-pipeline:upval_parsers",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:zipcodes",
      "object" : "collection:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "index-profile:zipcodes",
      "object" : "index-pipeline:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:_lw_tmp_1644982843",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:basic",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:hpe-typeahead-csv",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:sean-test-parsers",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:test",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "parser:upval-json",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:SignalsBrowser",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:SignalsBrowser2",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:SignalsBrowserAggregated",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:name-browser",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:superman",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:system-logs-browser",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:test",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-pipeline:test-question-answering",
      "object" : "blob:sample_qna_model.zip",
      "linkType" : "dependsOn",
      "originator" : "com.lucidworks.apollo.component.LinkExtractingUpdateStrategy"
    }, {
      "subject" : "query-pipeline:test-question-answering-dual-fields",
      "object" : "blob:sample_qna_model.zip",
      "linkType" : "dependsOn",
      "originator" : "com.lucidworks.apollo.component.LinkExtractingUpdateStrategy"
    }, {
      "subject" : "query-pipeline:upval-browser",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:test",
      "object" : "collection:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:test",
      "object" : "query-pipeline:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:test_rules_simulator",
      "object" : "collection:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:test_rules_simulator",
      "object" : "query-pipeline:test",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:zipcodes",
      "object" : "collection:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "query-profile:zipcodes",
      "object" : "query-pipeline:zipcodes",
      "linkType" : "relatesTo",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test1",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test_phrase_extraction",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test_phrase_extraction",
      "object" : "spark:test_spell_correction",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test_spell_correction",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test_synonym_detection",
      "object" : "app:test",
      "linkType" : "inContextOf",
      "originator" : "unspecified"
    }, {
      "subject" : "spark:test_synonym_detection",
      "object" : "spark:test_phrase_extraction",
      "linkType" : "dependsOn",
      "originator" : "unspecified"
    } ],
    "jobs" : [ {
      "resource" : "spark:test_click_signals_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 15,
        "timeUnit" : "minute",
        "startTime" : "2020-05-12T00:28:00.781Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_head_tail",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2020-05-13T00:13:01.093Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_phrase_extraction",
      "enabled" : true,
      "triggers" : [ {
        "type" : "job_completion",
        "enabled" : true,
        "triggerType" : "on_success",
        "otherJob" : "spark:test_spell_correction",
        "type" : "job_completion"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_session_rollup",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 15,
        "timeUnit" : "minute",
        "startTime" : "2020-05-12T00:28:00.864Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_spell_correction",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2020-05-12T00:27:46.577Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_synonym_detection",
      "enabled" : true,
      "triggers" : [ {
        "type" : "job_completion",
        "enabled" : true,
        "triggerType" : "on_success",
        "otherJob" : "spark:test_phrase_extraction",
        "type" : "job_completion"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_user_item_preferences_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2020-05-12T00:30:00.941Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:test_user_query_history_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2020-05-12T00:32:01.018Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:zipcodes_click_signals_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 15,
        "timeUnit" : "minute",
        "startTime" : "2022-03-02T03:02:31.014Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:zipcodes_head_tail",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2022-03-03T02:47:31.547Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:zipcodes_session_rollup",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 15,
        "timeUnit" : "minute",
        "startTime" : "2022-03-02T03:02:31.184Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:zipcodes_user_item_preferences_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2022-03-02T03:04:31.302Z",
        "type" : "interval"
      } ],
      "default" : false
    }, {
      "resource" : "spark:zipcodes_user_query_history_aggregation",
      "enabled" : true,
      "triggers" : [ {
        "type" : "interval",
        "enabled" : true,
        "interval" : 1,
        "timeUnit" : "day",
        "startTime" : "2022-03-02T03:06:31.430Z",
        "type" : "interval"
      } ],
      "default" : false
    } ],
    "sparkJobs" : [ {
      "type" : "aggregation",
      "id" : "test1",
      "definition" : {
        "id" : "test1",
        "sql" : "WITH signal_type_groups AS (\n        SELECT s.doc_id,\n               sum(s.count_i) AS signalCount_i,\n               t.title_t as doctitle_s\n        FROM test_signals as s\n        left join test as t on t.id = s.doc_id\n        WHERE s.type = 'click'\n        GROUP BY doc_id, mytype, doctitle_s\n) SELECT doc_id AS id,\n    signalCount_i, \n    doctitle_s,\n    'popular docos' as mytype\n     FROM signal_type_groups\nGROUP BY doc_id, signalCount_i, mytype, doctitle_s\n;",
        "selectQuery" : "*:*",
        "outputPipeline" : "_system",
        "outputCollection" : "test_signals_aggr",
        "rollupAggregator" : "SQL",
        "sourceRemove" : false,
        "sourceCatchup" : false,
        "outputRollup" : false,
        "typeFieldName" : "type"
      },
      "inputCollection" : "test_signals",
      "rows" : 10000,
      "skipCheckEnabled" : false
    }, {
      "type" : "sql_template",
      "id" : "test_click_signals_aggregation",
      "inputCollection" : "test_signals",
      "outputCollection" : "test_signals_aggr",
      "sql" : "WITH sigs_with_filters AS (\n   SELECT c.query as query,\n          c.doc_id,\n          q.filters_s as filters,\n          c.type,\n          c.ref_time,\n          c.count_i,\n          c.timestamp_tdt,\n          c.weight_d\n     FROM `${inputCollection}` c\n LEFT JOIN (SELECT id, filters_s FROM `${inputCollection}` WHERE type='response') q ON q.id = c.fusion_query_id\n    WHERE c.type IN (${signalTypes})\n ), signal_type_groups AS (\n     SELECT SUM(count_i) AS typed_aggr_count_i,\n            query,\n            doc_id,\n            type,\n            filters,\n            time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n       FROM sigs_with_filters\n   GROUP BY doc_id, query, filters, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          query AS query_s,\n          query AS query_t,\n          doc_id AS doc_id_s,\n          filters AS filters_s,\n          SPLIT(filters, ' \\\\$ ') AS filters_ss,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY query, doc_id, filters",
      "rollupSql" : "SELECT query_s,\n          query_s as query_t,\n          doc_id_s,\n          filters_s,\n          first(aggr_type_s) AS aggr_type_s,\n          SPLIT(filters_s, ' \\\\$ ') AS filters_ss,\n          SUM(weight_d) AS weight_d,\n          SUM(aggr_count_i) AS aggr_count_i\n     FROM test_signals_aggr\n GROUP BY query_s, doc_id_s, filters_s",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "click:1.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      }, {
        "key" : "optimizeOutput",
        "value" : "4"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each query / item combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used to boost documents at query time using the boosting stage."
    }, {
      "type" : "headTailAnalysis",
      "id" : "test_head_tail",
      "randomSeed" : 1234,
      "trainingCollection" : "test_signals",
      "outputCollection" : "test_job_reports",
      "overwriteOutput" : true,
      "trainingDataFilterQuery" : "type:click OR type:response",
      "fieldToVectorize" : "query",
      "trainingDataFrameConfigOptions" : { },
      "analyzerConfigQuery" : "{ \"analyzers\": [ { \"name\": \"StdTokLowerStem\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"standard\" },\"filters\": [{ \"type\": \"lowercase\" },{ \"type\": \"englishminimalstem\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"StdTokLowerStem\" } ]}",
      "countField" : "count_i",
      "mainType" : "click",
      "filterType" : "response",
      "signalTypeField" : "type",
      "minCountMain" : 1,
      "minCountFilter" : 20,
      "queryLenThreshold" : 2,
      "userHead" : -1.0,
      "userTail" : -1.0,
      "topQ" : [ 100.0, 0.01 ],
      "trafficPerc" : [ 0.25, 0.5, 0.75 ],
      "lastTraffic" : [ 0.01 ],
      "trafficCount" : [ 5.0 ],
      "overlapThreshold" : 4,
      "lenScale" : 6,
      "overlapNumBoost" : 10.0,
      "headQueryCntBoost" : 1.0,
      "tailRewrite" : true,
      "tailRewriteCollection" : "test_query_rewrite_staging",
      "enableAutoPublish" : false,
      "dataFormat" : "solr",
      "trainingDataSamplingFraction" : 1.0,
      "stopwordsList" : [ ]
    }, {
      "type" : "sip",
      "id" : "test_phrase_extraction",
      "trainingDataFilterQuery" : "*:*",
      "randomSeed" : 8180,
      "analyzerConfig" : "{ \"analyzers\": [{ \"name\": \"StdTokLowerStop\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"standard\" },\"filters\": [{ \"type\": \"lowercase\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"StdTokLowerStop\" } ]}",
      "trainingCollection" : "test_signals",
      "outputCollection" : "test_query_rewrite_staging",
      "overwriteOutput" : true,
      "fieldToVectorize" : "query",
      "trainingDataSamplingFraction" : 1.0,
      "trainingDataFrameConfigOptions" : { },
      "ngramSize" : 3,
      "minmatch" : 100,
      "attachPhrases" : false,
      "minLikelihood" : 0.1,
      "enableAutoPublish" : false,
      "dataFormat" : "solr",
      "sourceFields" : "query",
      "stopwordsList" : [ ]
    }, {
      "type" : "sql_template",
      "id" : "test_session_rollup",
      "inputCollection" : "test_signals",
      "outputCollection" : "test_signals",
      "sql" : "WITH session_agg AS (\n     SELECT COUNT(1) AS activity_count,\n            MIN(timestamp_tdt) AS start,\n            MAX(timestamp_tdt) AS end,\n            timediff(MAX(timestamp_tdt), MIN(timestamp_tdt), \"MINUTES\") AS duration,\n            'session' AS type,\n            first(user_id) AS user,\n            session_keywords(query) AS keywords,\n            session\n       FROM `${inputCollection}`\n      WHERE timestamp_tdt IS NOT NULL\n        AND type != 'session'\n        AND session IS NOT NULL\n        AND session NOT IN (SELECT session FROM `${inputCollection}` WHERE type = 'session' AND session IS NOT NULL)\n   GROUP BY session\n     HAVING timediff(current_timestamp(), MAX(timestamp_tdt), \"SECONDS\") >= ${elapsedSecsSinceLastActivity} OR timediff(current_timestamp(), MIN(timestamp_tdt), \"SECONDS\") >= ${elapsedSecsSinceSessionStart})\n SELECT activity_count, start, end, duration, type, user, keywords, session FROM session_agg",
      "parameters" : [ {
        "key" : "elapsedSecsSinceLastActivity",
        "value" : "360"
      }, {
        "key" : "elapsedSecsSinceSessionStart",
        "value" : "3600"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : false,
      "outputRollup" : false,
      "hiddenParameters" : [ {
        "key" : "outputProjectedFieldsOnly",
        "value" : "true"
      } ],
      "skipCheckEnabled" : false,
      "notes" : "Aggregate related user activity into a session signal containing activity count, duration, and keywords (based on user search terms). This job is used by the Fusion Insights application to show reports about user sessions. Use the 'elapsedSecsSinceLastActivity' and 'elapsedSecsSinceSessionStart' parameters to determine when a user session is considered to be complete."
    }, {
      "type" : "tokenPhraseSpellCorrection",
      "id" : "test_spell_correction",
      "trainingDataFilterQuery" : "type:click OR type:response",
      "trainingCollection" : "test_signals",
      "outputCollection" : "test_query_rewrite_staging",
      "overwriteOutput" : true,
      "maxDistance" : 2,
      "analyzerConfigQuery" : "{ \"analyzers\": [ { \"name\": \"LetterTokLowerStem\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"letter\" },\"filters\": [{ \"type\": \"lowercase\" },{ \"type\": \"KStem\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"LetterTokLowerStem\" } ]}",
      "analyzerConfigDictionary" : "{ \"analyzers\": [ { \"name\": \"LetterTokLowerStem\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"letter\" },\"filters\": [{ \"type\": \"lowercase\" },{ \"type\": \"KStem\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"LetterTokLowerStem\" } ]}",
      "lenScale" : 5,
      "fieldToVectorize" : "query",
      "mainType" : "click",
      "filterType" : "response",
      "signalTypeField" : "type",
      "minCountMain" : 1,
      "minCountFilter" : 10,
      "trainingDataSamplingFraction" : 1.0,
      "countField" : "count_i",
      "dictionaryDataFilterQuery" : "*:*",
      "minPrefix" : 1,
      "minMispellingLen" : 5,
      "correctionThreshold" : 0.8,
      "misspellingThreshold" : 0.8,
      "lastCharMatchBoost" : 1.0,
      "soundMatchBoost" : 3.0,
      "correctCntBoost" : 2.0,
      "editDistBoost" : 2.0,
      "corMisRatio" : 3.0,
      "randomSeed" : 1234,
      "trainingDataFrameConfigOptions" : { },
      "signalDataIndicator" : true,
      "enableAutoPublish" : false,
      "dataFormat" : "solr",
      "stopwordsList" : [ ]
    }, {
      "type" : "synonymDetection",
      "id" : "test_synonym_detection",
      "trainingDataFilterQuery" : "*:*",
      "trainingCollection" : "test_signals_aggr",
      "outputCollection" : "test_query_rewrite_staging",
      "overwriteOutput" : true,
      "misspellingCollection" : "test_query_rewrite_staging",
      "misspellingsFilterQuery" : "type:spell",
      "keyPhraseCollection" : "test_query_rewrite_staging",
      "keyPhraseFilterQuery" : "type:phrase",
      "countField" : "count_i",
      "fieldToVectorize" : "query",
      "docIdField" : "doc_id",
      "overlapThreshold" : 0.5,
      "minQueryCount" : 5,
      "similarityThreshold" : 0.01,
      "trainingDataSamplingFraction" : 1.0,
      "analyzerConfigQuery" : "{ \"analyzers\": [ { \"name\": \"LetterTokLowerStem\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"letter\" },\"filters\": [{ \"type\": \"lowercase\" },{ \"type\": \"KStem\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"LetterTokLowerStem\" } ]}",
      "randomSeed" : 1234,
      "trainingDataFrameConfigOptions" : { },
      "enableAutoPublish" : false,
      "dataFormat" : "solr",
      "stopwordsList" : [ ]
    }, {
      "type" : "sql_template",
      "id" : "test_user_item_preferences_aggregation",
      "inputCollection" : "test_signals",
      "outputCollection" : "test_signals_aggr",
      "sql" : "WITH signal_type_groups AS (\n    SELECT SUM(count_i) AS typed_aggr_count_i,\n           doc_id,\n           user_id,\n           type,\n           time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n      FROM ${inputCollection}\n     WHERE type IN (${signalTypes})\n  GROUP BY user_id, doc_id, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          doc_id AS doc_id_s,\n          user_id AS user_id_s,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY doc_id, user_id",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "click:1.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each user / item combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used as input to the ALS recommendation job."
    }, {
      "type" : "sql_template",
      "id" : "test_user_query_history_aggregation",
      "inputCollection" : "test_signals",
      "outputCollection" : "test_signals_aggr",
      "sql" : "WITH signal_type_groups AS (\n    SELECT SUM(count_i) AS typed_aggr_count_i,\n           user_id,\n           query,\n           type,\n           time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n      FROM ${inputCollection}\n     WHERE type IN (${signalTypes})\n  GROUP BY query, user_id, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          user_id AS user_id_s,\n          query AS query_s,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY user_id, query",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "request:1.0,click:5.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each user / query combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used to boost queries for a user based on their past queries."
    }, {
      "type" : "sql_template",
      "id" : "zipcodes_click_signals_aggregation",
      "inputCollection" : "zipcodes_signals",
      "outputCollection" : "zipcodes_signals_aggr",
      "sql" : "WITH sigs_with_filters AS (\n   SELECT c.query as query,\n          c.doc_id,\n          q.filters_s as filters,\n          c.type,\n          c.ref_time,\n          c.count_i,\n          c.timestamp_tdt,\n          c.weight_d\n     FROM `${inputCollection}` c\n LEFT JOIN (SELECT id, filters_s FROM `${inputCollection}` WHERE type='response') q ON q.id = c.fusion_query_id\n    WHERE c.type IN (${signalTypes})\n ), signal_type_groups AS (\n     SELECT SUM(count_i) AS typed_aggr_count_i,\n            query,\n            doc_id,\n            type,\n            filters,\n            time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n       FROM sigs_with_filters\n   GROUP BY doc_id, query, filters, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          query AS query_s,\n          query AS query_t,\n          doc_id AS doc_id_s,\n          filters AS filters_s,\n          SPLIT(filters, ' \\\\$ ') AS filters_ss,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY query, doc_id, filters",
      "rollupSql" : "SELECT query_s,\n          query_s as query_t,\n          doc_id_s,\n          filters_s,\n          first(aggr_type_s) AS aggr_type_s,\n          SPLIT(filters_s, ' \\\\$ ') AS filters_ss,\n          SUM(weight_d) AS weight_d,\n          SUM(aggr_count_i) AS aggr_count_i\n     FROM zipcodes_signals_aggr\n GROUP BY query_s, doc_id_s, filters_s",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "click:1.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      }, {
        "key" : "optimizeOutput",
        "value" : "4"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each query / item combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used to boost documents at query time using the boosting stage."
    }, {
      "type" : "headTailAnalysis",
      "id" : "zipcodes_head_tail",
      "randomSeed" : 1234,
      "trainingCollection" : "zipcodes_signals",
      "outputCollection" : "zipcodes_job_reports",
      "overwriteOutput" : true,
      "trainingDataFilterQuery" : "type:click OR type:response",
      "fieldToVectorize" : "query",
      "trainingDataFrameConfigOptions" : { },
      "analyzerConfigQuery" : "{ \"analyzers\": [ { \"name\": \"StdTokLowerStem\",\"charFilters\": [ { \"type\": \"htmlstrip\" } ],\"tokenizer\": { \"type\": \"standard\" },\"filters\": [{ \"type\": \"lowercase\" },{ \"type\": \"englishminimalstem\" }] }],\"fields\": [{ \"regex\": \".+\", \"analyzer\": \"StdTokLowerStem\" } ]}",
      "countField" : "count_i",
      "mainType" : "click",
      "filterType" : "response",
      "signalTypeField" : "type",
      "minCountMain" : 1,
      "minCountFilter" : 20,
      "queryLenThreshold" : 2,
      "userHead" : -1.0,
      "userTail" : -1.0,
      "topQ" : [ 100.0, 0.01 ],
      "trafficPerc" : [ 0.25, 0.5, 0.75 ],
      "lastTraffic" : [ 0.01 ],
      "trafficCount" : [ 5.0 ],
      "overlapThreshold" : 4,
      "lenScale" : 6,
      "overlapNumBoost" : 10.0,
      "headQueryCntBoost" : 1.0,
      "tailRewrite" : true,
      "tailRewriteCollection" : "zipcodes_query_rewrite_staging",
      "enableAutoPublish" : false,
      "dataFormat" : "solr",
      "trainingDataSamplingFraction" : 1.0,
      "stopwordsList" : [ ]
    }, {
      "type" : "sql_template",
      "id" : "zipcodes_session_rollup",
      "inputCollection" : "zipcodes_signals",
      "outputCollection" : "zipcodes_signals",
      "sql" : "WITH session_agg AS (\n     SELECT COUNT(1) AS activity_count,\n            MIN(timestamp_tdt) AS start,\n            MAX(timestamp_tdt) AS end,\n            timediff(MAX(timestamp_tdt), MIN(timestamp_tdt), \"MINUTES\") AS duration,\n            'session' AS type,\n            first(user_id) AS user,\n            session_keywords(query) AS keywords,\n            session\n       FROM `${inputCollection}`\n      WHERE timestamp_tdt IS NOT NULL\n        AND type != 'session'\n        AND session IS NOT NULL\n        AND session NOT IN (SELECT session FROM `${inputCollection}` WHERE type = 'session' AND session IS NOT NULL)\n   GROUP BY session\n     HAVING timediff(current_timestamp(), MAX(timestamp_tdt), \"SECONDS\") >= ${elapsedSecsSinceLastActivity} OR timediff(current_timestamp(), MIN(timestamp_tdt), \"SECONDS\") >= ${elapsedSecsSinceSessionStart})\n SELECT activity_count, start, end, duration, type, user, keywords, session FROM session_agg",
      "parameters" : [ {
        "key" : "elapsedSecsSinceLastActivity",
        "value" : "360"
      }, {
        "key" : "elapsedSecsSinceSessionStart",
        "value" : "3600"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : false,
      "outputRollup" : false,
      "hiddenParameters" : [ {
        "key" : "outputProjectedFieldsOnly",
        "value" : "true"
      } ],
      "skipCheckEnabled" : false,
      "notes" : "Aggregate related user activity into a session signal containing activity count, duration, and keywords (based on user search terms). This job is used by the Fusion Insights application to show reports about user sessions. Use the 'elapsedSecsSinceLastActivity' and 'elapsedSecsSinceSessionStart' parameters to determine when a user session is considered to be complete."
    }, {
      "type" : "sql_template",
      "id" : "zipcodes_user_item_preferences_aggregation",
      "inputCollection" : "zipcodes_signals",
      "outputCollection" : "zipcodes_signals_aggr",
      "sql" : "WITH signal_type_groups AS (\n    SELECT SUM(count_i) AS typed_aggr_count_i,\n           doc_id,\n           user_id,\n           type,\n           time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n      FROM ${inputCollection}\n     WHERE type IN (${signalTypes})\n  GROUP BY user_id, doc_id, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          doc_id AS doc_id_s,\n          user_id AS user_id_s,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY doc_id, user_id",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "click:1.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each user / item combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used as input to the ALS recommendation job."
    }, {
      "type" : "sql_template",
      "id" : "zipcodes_user_query_history_aggregation",
      "inputCollection" : "zipcodes_signals",
      "outputCollection" : "zipcodes_signals_aggr",
      "sql" : "WITH signal_type_groups AS (\n    SELECT SUM(count_i) AS typed_aggr_count_i,\n           user_id,\n           query,\n           type,\n           time_decay(count_i, timestamp_tdt, \"30 days\", ref_time, weight_d) AS typed_weight_d\n      FROM ${inputCollection}\n     WHERE type IN (${signalTypes})\n  GROUP BY query, user_id, type\n ) SELECT SUM(typed_aggr_count_i) AS aggr_count_i,\n          user_id AS user_id_s,\n          query AS query_s,\n          weighted_sum(typed_weight_d, type, '${signalTypeWeights}') AS weight_d\n     FROM signal_type_groups\n GROUP BY user_id, query",
      "parameters" : [ {
        "key" : "signalTypeWeights",
        "value" : "request:1.0,click:5.0,cart:10.0,purchase:25.0"
      } ],
      "selectQuery" : "*:*",
      "sourceRemove" : false,
      "sourceCatchup" : true,
      "outputRollup" : true,
      "hiddenParameters" : [ {
        "key" : "signalTypes",
        "value" : "_regex/signalTypeWeights/([\\w\\-\\.]*):([\\d\\.\\-]*)(,|$)/'$1'$3/g"
      } ],
      "skipCheckEnabled" : true,
      "notes" : "Computes an aggregated weight for each user / query combination found in the signals collection. The weight for each group is computed using an exponential time-decay on signal count (30 day half-life) and a weighted sum based on the signal type. Use the 'signalTypeWeights' parameter to set the correct signal types and weights for your dataset. The results of this job can be used to boost queries for a user based on their past queries."
    } ],
    "blobs" : [ {
      "id" : "193588__6_.service-manual.sample.pdf",
      "path" : "/193588__6_.service-manual.sample.pdf",
      "dir" : "/",
      "filename" : "193588__6_.service-manual.sample.pdf",
      "contentType" : "application/pdf",
      "size" : 25330868,
      "modifiedTime" : "2020-09-22T16:45:35.013Z",
      "version" : 1678553262343585792,
      "md5" : "0aac46568a1f236dbb4f5c19082e11d4",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "Public_Schools.csv",
      "path" : "/Public_Schools.csv",
      "dir" : "/",
      "filename" : "Public_Schools.csv",
      "contentType" : "text/csv",
      "size" : 48035574,
      "modifiedTime" : "2022-02-05T01:23:21.347Z",
      "version" : 1723884320952680448,
      "md5" : "661ebdf26542149368529881c77ab349",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "Sample_Product SKU Numbers",
      "path" : "/Sample_Product SKU Numbers",
      "dir" : "/",
      "filename" : "Sample_Product SKU Numbers",
      "contentType" : "application/octet-stream",
      "size" : 1706777,
      "modifiedTime" : "2020-10-30T18:54:52.665Z",
      "version" : 1682004081553440768,
      "md5" : "0f63004759a6f622606535aa490e8866",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "Sample_Product SKU Numbers.csv",
      "path" : "/Sample_Product SKU Numbers.csv",
      "dir" : "/",
      "filename" : "Sample_Product SKU Numbers.csv",
      "contentType" : "text/csv",
      "size" : 1706777,
      "modifiedTime" : "2020-10-30T19:02:27.995Z",
      "version" : 1682004558999453696,
      "md5" : "0f63004759a6f622606535aa490e8866",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "all_us_zipcodes.csv",
      "path" : "/all_us_zipcodes.csv",
      "dir" : "/",
      "filename" : "all_us_zipcodes.csv",
      "contentType" : "text/csv",
      "size" : 2072181,
      "modifiedTime" : "2022-02-04T22:46:59.094Z",
      "version" : 1723874483009224704,
      "md5" : "9bcf71dc6c45bb333f6f0ebd0e3669f0",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "sampleLocations.csv",
      "path" : "/sampleLocations.csv",
      "dir" : "/",
      "filename" : "sampleLocations.csv",
      "contentType" : "text/csv",
      "size" : 142,
      "modifiedTime" : "2022-02-05T01:15:23.082Z",
      "version" : 1723883819480645632,
      "md5" : "4361c2187fe967402db4b1d4fb8fbe19",
      "metadata" : {
        "resourceType" : "file"
      }
    }, {
      "id" : "sample_qna_model.zip",
      "path" : "/sample_qna_model.zip",
      "dir" : "/",
      "filename" : "sample_qna_model.zip",
      "contentType" : "application/octet-stream",
      "size" : 14662616,
      "modifiedTime" : "2020-05-12T00:01:25.630Z",
      "version" : 1666440689752211456,
      "md5" : "285cdf5832235df7145098143061e3ec",
      "metadata" : {
        "modelType" : "mleap",
        "resourceType" : "model:ml-model"
      }
    }, {
      "id" : "usernames-found.csv",
      "path" : "/usernames-found.csv",
      "dir" : "/",
      "filename" : "usernames-found.csv",
      "contentType" : "text/csv",
      "size" : 112,
      "modifiedTime" : "2021-10-21T05:37:18.669Z",
      "version" : 1714206423038033920,
      "md5" : "fc2e9a748df7615bd94cbfe2c247b5d7",
      "metadata" : {
        "resourceType" : "file"
      }
    } ],
    "fusionApps" : [ {
      "id" : "test",
      "name" : "test",
      "dataUri" : "/admin/App-Tile-07-460x160.png",
      "properties" : {
        "headerImageName" : "headerImage7",
        "tileColor" : "apps-red",
        "previousCollectionId" : "test"
      }
    } ]
  },
  "metadata" : {
    "formatVersion" : "1",
    "exportedBy" : "fc5bd3fa-82e7-4954-860b-d7e90a0af0b4",
    "exportedDate" : "2022-06-15T00:29:03.025003Z",
    "fusionVersion" : "4.2.6",
    "fusionGuid" : "36c902a9-613f-4de9-9bdd-6c7edabb9af3"
  }
}